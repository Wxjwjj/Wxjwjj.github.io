<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="è‡ªç„¶è¯­è¨€å¤„ç†ï¼ŒStudyingï¼ŒCoding">
<meta property="og:type" content="website">
<meta property="og:title" content="Deep Coding">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Deep Coding">
<meta property="og:description" content="è‡ªç„¶è¯­è¨€å¤„ç†ï¼ŒStudyingï¼ŒCoding">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Deep Coding">
<meta name="twitter:description" content="è‡ªç„¶è¯­è¨€å¤„ç†ï¼ŒStudyingï¼ŒCoding">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"right","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>Deep Coding</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-right 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Deep Coding</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            å…³äº
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            æ ‡ç­¾
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            æ—¥å¿—
          </a>
        </li>
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/24/norm/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç¥¥å‰">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79ly1fnu0obfmlbj30sg0iyabk.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Deep Coding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/24/norm/" itemprop="url">ç¥ç»ç½‘ç»œä¸­çš„æƒé‡åˆå§‹åŒ–</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-02-24T15:16:23+08:00">
                2018-02-24
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/02/24/norm/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/02/24/norm/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="æ¦‚å¿µå…ˆè¡Œ"><a href="#æ¦‚å¿µå…ˆè¡Œ" class="headerlink" title="æ¦‚å¿µå…ˆè¡Œ"></a>æ¦‚å¿µå…ˆè¡Œ</h3><p>æ­£æ€åˆ†å¸ƒï¼ˆNormal distributionï¼‰ï¼Œåˆåé«˜æ–¯åˆ†å¸ƒï¼ˆGaussian distributionï¼‰ï¼Œå‘ˆé’Ÿå‹ï¼Œä¸¤å¤´ä½ï¼Œä¸­é—´é«˜ã€‚<br><code>æ•°å­¦å®šä¹‰ï¼š</code>éšæœºå˜é‡Xæœä»ä¸€ä¸ªæ•°å­¦æœŸæœ›ä¸ºÎ¼ã€æ–¹å·®ä¸ºÏƒ^2çš„æ­£æ€åˆ†å¸ƒï¼Œè®°ä¸ºN(Î¼ï¼ŒÏƒ^2)ã€‚å…¶ä¸­æœŸæœ›å€¼Î¼å†³å®šäº†å…¶é›†ä¸­è¶‹åŠ¿ä½ç½®ï¼›æ ‡å‡†å·®Ïƒå†³å®šäº†åˆ†å¸ƒçš„å¹…åº¦ï¼ŒÏƒè¶Šå¤§ï¼Œæ›²çº¿è¶Šæ‰å¹³ï¼Œåä¹‹Ïƒè¶Šå°ï¼Œæ›²çº¿è¶Šç˜¦é«˜ã€‚<br><code>æ ‡å‡†æ­£æ€åˆ†å¸ƒï¼š</code>å½“Î¼ = 0,Ïƒ = 1æ—¶æ˜¯æ ‡å‡†æ­£æ€åˆ†å¸ƒã€‚<br><code>æ–¹å·®ï¼š</code>sum(x-u)^2/N </p>
<h3 id="ä¸€ä¸ªç®€å•çš„ç¥ç»ç½‘ç»œ"><a href="#ä¸€ä¸ªç®€å•çš„ç¥ç»ç½‘ç»œ" class="headerlink" title="ä¸€ä¸ªç®€å•çš„ç¥ç»ç½‘ç»œ"></a>ä¸€ä¸ªç®€å•çš„ç¥ç»ç½‘ç»œ</h3><p>å¯¹äº<code>z = np.sum(x*w)</code>ï¼Œå‡å¦‚wä¸ºä¸€ä¸ª1000ç»´çš„å‘é‡ï¼Œæœä»å‡å€¼ä¸º0ã€æ–¹å·®ä¸º1çš„æ­£æ€åˆ†å¸ƒï¼Œè¾“å…¥å±‚xä¸€å…±1000ä¸ªç¥ç»å…ƒï¼Œä¸”å…¨ä¸º1ã€‚æ‰€ä»¥zæœä»çš„æ˜¯ä¸€ä¸ªå‡å€¼è¿‘ä¼¼ä¸º0ã€æ–¹å·®ä¸º1000çš„æ­£æ€åˆ†å¸ƒï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="function"><span class="keyword">def</span>  <span class="title">run</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># zçš„ä¸ªæ•°</span></span><br><span class="line">    t = <span class="number">20000</span></span><br><span class="line">    z_lst = np.empty(t)</span><br><span class="line">    x = np.ones(<span class="number">1000</span>)</span><br><span class="line">    b = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> xrange(t):</span><br><span class="line">        w = np.random.randn(<span class="number">1000</span>) <span class="comment">#ä»æ ‡å‡†æ­£æ€åˆ†å¸ƒä¸­è¿”å›ä¸€ä¸ªæˆ–å¤šä¸ªæ ·æœ¬å€¼</span></span><br><span class="line">        <span class="comment"># w = np.random.rand(1000) # è¿”å›[0,1)ä¹‹é—´çš„éšæœºæ ·æœ¬</span></span><br><span class="line">        <span class="comment">#plt.hist(w, bins=50, normed=1)</span></span><br><span class="line">        <span class="comment">#plt.show()</span></span><br><span class="line">        z = np.sum(x * w) + b</span><br><span class="line">        z_lst[i] = z</span><br><span class="line"></span><br><span class="line">    <span class="keyword">print</span> <span class="string">'z å‡å€¼ï¼š'</span>, np.mean(z_lst)</span><br><span class="line">    <span class="keyword">print</span> <span class="string">'z æ–¹å·®ï¼š'</span>, np.var(z_lst)</span><br><span class="line">    plt.hist(z_lst, bins=<span class="number">50</span>, normed=<span class="number">1</span>) <span class="comment"># histç›´æ–¹å›¾ç»˜åˆ¶å‡½æ•°ï¼Œbinsï¼šç›´æ–¹å›¾çš„æŸ±æ•°ï¼Œé»˜è®¤ä¸º10ï¼Œnormedï¼šæ˜¯å¦è¿›è¡Œå½’ä¸€åŒ–</span></span><br><span class="line">    plt.show()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    run()</span><br></pre></td></tr></table></figure></p>
<p>ä»å›¾ä¸­çœ‹å‡ºï¼šzæœ‰éå¸¸å¤§çš„æ¦‚ç‡æ˜¯ä¸€ä¸ªè¿œå°äº-1æˆ–è€…è¿œå¤§äº1çš„æ•°ï¼Œé€šè¿‡æ¿€æ´»å‡½æ•°ï¼ˆæ¯”å¦‚sigmoidï¼‰åæ‰€å¾—åˆ°çš„è¾“å‡ºéå¸¸æ¥è¿‘0æˆ–è€…1ã€‚è¿™æ ·ä¸€æ¥å¯¹æƒé‡çš„å¾®å°è°ƒæ•´ï¼ŒåŸºæœ¬ä¸ä¼šä½¿å¾—éšè—å±‚zçš„ç¥ç»å…ƒæ¿€æ´»å€¼å‘ç”Ÿå˜åŒ–ã€‚BPæ—¶ï¼Œæƒé‡æ›´æ–°å°±ä¼šéå¸¸æ…¢ã€‚<br><img src="/img/gaosi.jpeg" alt=""></p>
<p><font color="red">Targetï¼š</font>é‚£ä¹ˆæˆ‘ä»¬çš„ç›®æ ‡å°±æ˜¯é€šè¿‡æ”¹å˜æƒé‡çŸ©é˜µwçš„åˆ†å¸ƒï¼Œä½¿|z|å°½é‡æ¥è¿‘äº0ã€‚ç»è¿‡æ¿€æ´»å‡½æ•°åç¥ç»å…ƒçš„å˜åŒ–ä¾¿ä¼šæ¯”è¾ƒæ•æ„Ÿã€‚</p>
<h3 id="æ€æ ·è¿›è¡Œæƒé‡åˆå§‹åŒ–"><a href="#æ€æ ·è¿›è¡Œæƒé‡åˆå§‹åŒ–" class="headerlink" title="æ€æ ·è¿›è¡Œæƒé‡åˆå§‹åŒ–"></a>æ€æ ·è¿›è¡Œæƒé‡åˆå§‹åŒ–</h3><p>æ ¹æ®ä¸Šè¿°æ–¹å·®çš„è®¡ç®—å…¬å¼ï¼š<code>sum(x-u)^2/N</code> ï¼Œåªè¦xç¼©å°sqrt(m)å€ï¼Œæ€»çš„æ–¹å·®ä¾¿ç¼©å°må€ã€‚å¯¹ä¸Šè¿°ä»£ç è¿›è¡Œæ”¹è¿›ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">w = np.random.randn(<span class="number">1000</span>)/np.sqrt(<span class="number">1000</span>)</span><br><span class="line"><span class="comment"># ä¿æŒä¸zåˆ†å¸ƒï¼ˆ1ï¼‰å›¾åƒæ¨ªåæ ‡åˆ»åº¦ä¸å˜ï¼Œä½¿å¾—ç»“æœæ›´åŠ ç›´è§‚</span></span><br><span class="line">plt.xlim([<span class="number">-150</span>, <span class="number">150</span>])</span><br><span class="line">plt.hist(z_lst, bins=<span class="number">50</span>)</span><br><span class="line">plt.show()</span><br><span class="line"><span class="comment">#z å‡å€¼ï¼š 0.013468729222</span></span><br><span class="line"><span class="comment">#z æ–¹å·®ï¼š 1.00195898464</span></span><br></pre></td></tr></table></figure></p>
<p><img src="/img/gaosi2.jpeg" alt=""><br>ç”±ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œéšè—å±‚ç¥ç»å…ƒzçš„åˆ†å¸ƒæ˜¯ä¸€ä¸ªæ¯”è¾ƒæ¥è¿‘äº0çš„æ•°ï¼Œä½¿å¾—ç¥ç»å…ƒçš„å˜åŒ–æ¯”è¾ƒæ•æ„Ÿï¼Œè®©BPè¿‡ç¨‹èƒ½å¤Ÿæ­£å¸¸è¿›è¡Œä¸‹å»ã€‚</p>
<h3 id="Refï¼š"><a href="#Refï¼š" class="headerlink" title="Refï¼š"></a>Refï¼š</h3><p><a href="https://www.jianshu.com/p/03009cfdf733" target="_blank" rel="noopener">ã€Šç¥ç»ç½‘ç»œä¸­çš„æƒé‡åˆå§‹åŒ–ï¼šWhy and Howã€‹</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/07/textsum/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç¥¥å‰">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79ly1fnu0obfmlbj30sg0iyabk.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Deep Coding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/07/textsum/" itemprop="url">Textsumï¼šæ·±åº¦å­¦ä¹ åº”ç”¨äºè‡ªåŠ¨æ–‡æœ¬æ‘˜è¦</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-02-07T10:42:24+08:00">
                2018-02-07
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/02/07/textsum/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/02/07/textsum/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p><strong>Tips: PPTç›´æ¥è½¬çš„å›¾ç‰‡ï¼Œç‚¹å‡»ä»»æ„ä¸€å¼ è¿›å…¥é«˜æ¸…è¯»å›¾æ¨¡å¼</strong> ğŸ¶ğŸ¶</p>
</blockquote>
<p><img src="/img/text_sum1.jpeg" width="700" alt="å›¾ç‰‡åç§°" align="center"><br><img src="/img/text_sum2.jpeg" width="700" alt="å›¾ç‰‡åç§°" align="center"><br><img src="/img/text_sum3.jpeg" width="700" alt="å›¾ç‰‡åç§°" align="center"><br><img src="/img/text_sum4.jpeg" width="700" alt="å›¾ç‰‡åç§°" align="center"><br><img src="/img/text_sum5.jpeg" width="700" alt="å›¾ç‰‡åç§°" align="center"><br><img src="/img/text_sum6.jpeg" width="700" alt="å›¾ç‰‡åç§°" align="center"><br><img src="/img/text_sum7.jpeg" width="700" alt="å›¾ç‰‡åç§°" align="center"><br><img src="/img/text_sum8.jpeg" width="700" alt="å›¾ç‰‡åç§°" align="center"><br><img src="/img/text_sum9.jpeg" width="700" alt="å›¾ç‰‡åç§°" align="center"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/05/0to1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç¥¥å‰">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79ly1fnu0obfmlbj30sg0iyabk.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Deep Coding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/05/0to1/" itemprop="url">ã€Šä»0åˆ°1ã€‹è¯»ä¹¦ç¬”è®°</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-02-05T23:12:35+08:00">
                2018-02-05
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/02/05/0to1/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/02/05/0to1/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>2017.09ï½2018.02ï¼ŒåŠ å…¥åˆ›ä¸šå…¬å¸å·¥ä½œå·²è¿‘åŠå¹´ã€‚å†è¯»ã€Šä»0åˆ°1ã€‹ï¼Œå¯¹ä½œè€…è¦è¡¨è¾¾çš„æ€æƒ³æ‰å¼€å§‹æœ‰äº†ä¸€äº›äº†è§£ã€‚åˆä¸Šä¹¦æœ¬ï¼ŒæŒ‰è‡ªå·±å¯¹ä¹¦ä¸­å†…å®¹çš„å°è±¡ï¼Œç”±æ·±åŠæµ…</p>
<p>#### </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/04/pachong-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç¥¥å‰">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79ly1fnu0obfmlbj30sg0iyabk.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Deep Coding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/04/pachong-1/" itemprop="url">çˆ¬è™«å…¥é—¨_æ–‡æœ¬æŠ½å–</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-02-04T20:24:02+08:00">
                2018-02-04
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/02/04/pachong-1/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/02/04/pachong-1/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>æµè§ˆå™¨ä½œä¸ºå®¢æˆ·ç«¯ï¼Œæ¥æ”¶æœåŠ¡å™¨è¿”å›çš„æ¶ˆæ¯ï¼Œè¿›è¡Œè§£æåå±•ç¤ºç»™æˆ‘ä»¬ã€‚æˆ‘ä»¬å¯ä»¥åœ¨æœ¬åœ°ä¿®æ”¹htmlä¿¡æ¯ï¼Œå¯¹ç½‘é¡µè¿›è¡Œâ€œæ•´å®¹â€ï¼Œè¦çŸ¥é“ç½‘é¡µçš„ä»»ä½•ä¿¡æ¯éƒ½å¯ä»¥è¢«ä¿®æ”¹ï¼Œä½†æ˜¯ä¿®æ”¹åçš„ä¿¡æ¯ä¸å½±å“æœåŠ¡å™¨ç«¯ï¼Œåˆ·æ–°ååˆä¼šå˜æˆä¹‹å‰æœåŠ¡å™¨ç«¯æ¨é€çš„æ ¼å¼ã€‚</p>
<h3 id="å®¡æŸ¥å…ƒç´ "><a href="#å®¡æŸ¥å…ƒç´ " class="headerlink" title="å®¡æŸ¥å…ƒç´ "></a>å®¡æŸ¥å…ƒç´ </h3><p>æœ‰äº†ä¸Šé¢çš„è®¤è¯†åï¼Œæ€æ ·ä¿®æ”¹ç½‘é¡µçš„htmlä¿¡æ¯å‘¢ï¼Ÿåœ¨ä½ æƒ³è¦ä¿®æ”¹é¡µé¢çš„æŸä¸ªä½ç½®å³å‡»ï¼Œç»§ç»­ç‚¹å‡»<code>å®¡æŸ¥</code>ï¼Œå³å¯è·å¾—è¯¥ä½ç½®çš„htmlä¿¡æ¯ã€‚Egï¼šåœ¨é‚®ç®±ç™»é™†è¾“å…¥å¯†ç çš„ä½ç½®ç‚¹å‡»å®¡æŸ¥å…ƒç´ ï¼Œå°†passwordå±æ€§æ”¹ä¸ºtextï¼Œè¾“å…¥å¯†ç æ—¶å°†ä¸å†æ˜¯å°åœ†ç‚¹çš„å½¢å¼ã€‚<br><img src="/img/pa_1.jpeg" alt=""><br>ç½‘é¡µçš„å…¨éƒ¨ä¿¡æ¯éƒ½åœ¨å…¶htmlè¯­å¥ä¸­ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬é‡‡ç”¨pythonä¸­çš„<a href="http://docs.python-requests.org/zh_CN/latest/user/quickstart.html" target="_blank" rel="noopener">requests</a>æ¨¡å—ï¼Œè·å–ç½‘é¡µçš„htmlä¿¡æ¯ã€‚</p>
<h3 id="å®‰è£…python-httpæ¨¡å—requests"><a href="#å®‰è£…python-httpæ¨¡å—requests" class="headerlink" title="å®‰è£…python httpæ¨¡å—requests"></a>å®‰è£…python httpæ¨¡å—requests</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install requests</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œç®€å•çš„æå–ä¸€ä¸ªç½‘ç»œå°è¯´çš„htmlä¿¡æ¯<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">target = <span class="string">'http://www.biqukan.com/1_1094/5403177.html'</span></span><br><span class="line">req = requests.get(url=target)</span><br><span class="line">html = req.text</span><br><span class="line">print(html) <span class="comment"># ç½‘é¡µhtmlå†…å®¹ï¼ŒåŒå³é”®åçš„ç½‘é¡µå®¡æŸ¥å†…å®¹</span></span><br></pre></td></tr></table></figure></p>
<p>requestsæ¨¡å—è·å–çš„ä¿¡æ¯ä¸ºå¸¦æ ‡ç­¾(divã€brâ€¦)çš„htmlä¿¡æ¯ï¼Œè¿˜éœ€è¦é€šè¿‡ä¸‹é¢çš„beautifulsoupæ¨¡å—ï¼Œæå–ä¸­æˆ‘ä»¬æ„Ÿå…´è¶£çš„æ®µè½ã€‚</p>
<h3 id="å®‰è£…æ–‡æœ¬æå–æ¨¡å—Beautiful-Soup"><a href="#å®‰è£…æ–‡æœ¬æå–æ¨¡å—Beautiful-Soup" class="headerlink" title="å®‰è£…æ–‡æœ¬æå–æ¨¡å—Beautiful Soup"></a>å®‰è£…æ–‡æœ¬æå–æ¨¡å—Beautiful Soup</h3><p>pythonçš„ç¬¬ä¸‰æ–¹åº“ï¼Œç”¨äºä»htmlã€xmlæ–‡ä»¶ä¸­æå–æ•°æ®ï¼Œä»¥æ ‘çŠ¶ç»“æ„çš„æ–¹å¼æ‰§è¡ŒæŸ¥è¯¢ã€‚å¹¶ä¸”æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼çš„æ¨¡ç³ŠåŒ¹é…ã€‚<br> <img src="/img/pa_2.jpeg" width="550" alt="å›¾ç‰‡åç§°" align="center"><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install beautifulsoup4</span><br></pre></td></tr></table></figure></p>
<p>è¿™é‡Œå¼•ç”¨<a href="http://blog.csdn.net/u012662731/article/details/78537432" target="_blank" rel="noopener">Jack-Cherish</a>å¯¹htmlçš„è§£é‡Šï¼š</p>
<blockquote>
<p>â€œä¸€ä¸ªå¥³äººçš„åŒ…åŒ…é‡Œï¼Œä¼šæœ‰å¾ˆå¤šä¸œè¥¿ï¼Œå¥¹ä»¬ä¼šæ ¹æ®è‡ªå·±çš„ä¹ æƒ¯å°†è‡ªå·±çš„ä¸œè¥¿è¿›è¡Œåˆ†ç±»æ”¾å¥½ã€‚é•œå­å’Œå£çº¢è¿™äº›ä¼šç»å¸¸ç”¨åˆ°çš„ä¸œè¥¿ï¼Œä¼šå½’æ”¾åˆ°å®¹æ˜“æ‹¿åˆ°çš„å¤–ä¾§å£è¢‹é‡Œã€‚é‚£äº›ä¸ç»å¸¸ç”¨åˆ°ï¼Œéœ€è¦æ³¨æ„å®‰å…¨å­˜æ”¾çš„è¯ä»¶ä¼šæ”¾åˆ°ä¸å®¹æ˜“æ‹¿åˆ°çš„é‡Œä¾§å£è¢‹é‡Œâ€ã€‚è€Œhtmlæ ‡ç­¾å°±åƒä¸€ä¸ªä¸ªâ€œå£è¢‹â€ï¼Œæ¯ä¸ªâ€œå£è¢‹â€éƒ½æœ‰è‡ªå·±çš„ç‰¹å®šåŠŸèƒ½ï¼Œè´Ÿè´£å­˜æ”¾ä¸åŒçš„å†…å®¹ã€‚</p>
</blockquote>
<p>ä¾‹å¦‚ï¼šä¸Šè¿°ä¾‹å­ä¸­çš„divæ ‡ç­¾ä¸‹å­˜æ”¾äº†æˆ‘ä»¬å…³å¿ƒçš„æ­£æ–‡å†…å®¹ã€‚è¿™ä¸ªdivæ ‡ç­¾æ˜¯è¿™æ ·çš„ï¼š<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">"content"</span>, class=<span class="string">"showtxt"</span>&gt;</span><br></pre></td></tr></table></figure></p>
<p>idå’Œclasså°±æ˜¯divæ ‡ç­¾çš„å±æ€§ï¼Œcontentå’Œshowtxtæ˜¯å±æ€§å€¼ï¼Œä¸€ä¸ªå±æ€§å¯¹åº”ä¸€ä¸ªå±æ€§å€¼ã€‚å®ƒæ˜¯ç”¨æ¥åŒºåˆ†ä¸åŒçš„divæ ‡ç­¾çš„ï¼Œå› ä¸ºdivæ ‡ç­¾å¯ä»¥æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬æ€ä¹ˆåŠ ä»¥åŒºåˆ†ä¸åŒçš„divæ ‡ç­¾å‘¢ï¼Ÿå°±æ˜¯é€šè¿‡ä¸åŒçš„å±æ€§å€¼ã€‚å¯ä»¥å‘ç°ç½‘ç»œå°è¯´çš„æ­£æ–‡éƒ¨åˆ†æ­£å”¯ä¸€çš„å¯¹åº”äºclass=â€showtxtâ€çš„divæ ‡ç­¾ä¸‹ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bf = BeautifulSoup(html) <span class="comment"># find ä¸€å¯¹æ ‡ç­¾ï¼š&lt;div&gt; &lt;/div&gt;ä¹‹é—´çš„å†…å®¹</span></span><br><span class="line">texts = bf.find_all(<span class="string">'div'</span>, class_ = <span class="string">'showtxt'</span>)  <span class="comment"># ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è·å–çš„æ ‡ç­¾åï¼Œç¬¬äºŒä¸ªå‚æ•°class_æ˜¯æ ‡ç­¾çš„å±æ€§</span></span><br><span class="line">print(texts[<span class="number">0</span>].text.replace(<span class="string">'\xa0'</span>*<span class="number">8</span>,<span class="string">'\n\n'</span>)) </span><br><span class="line"><span class="comment">#ä½¿ç”¨textå±æ€§ï¼Œæå–æ–‡æœ¬å†…å®¹ï¼Œæ»¤é™¤bræ ‡ç­¾; ä¹‹åè¿›è¡Œæ¢è¡Œç¬¦æ›¿æ¢åŠæå–æ–‡æœ¬éƒ¨åˆ†å†…å®¹</span></span><br></pre></td></tr></table></figure></p>
<p>BeautifulSoupå‡½æ•°å¤„ç†å®Œåï¼Œå¯è§çš„æ˜¯æå–å‡ºäº†è¯¥å°è¯´å®Œæ•´çš„çš„æ­£æ–‡å†…å®¹ã€‚</p>
<h3 id="è·å–æ¯ä¸ªç« èŠ‚çš„é“¾æ¥"><a href="#è·å–æ¯ä¸ªç« èŠ‚çš„é“¾æ¥" class="headerlink" title="è·å–æ¯ä¸ªç« èŠ‚çš„é“¾æ¥"></a>è·å–æ¯ä¸ªç« èŠ‚çš„é“¾æ¥</h3><p>ç« èŠ‚ä¿¡æ¯éƒ½æ”¾åœ¨äº†<code>class = listmain</code>çš„divæ ‡ç­¾ä¸‹ï¼Œè·å–æ–¹æ³•åŒä¸Šã€‚é“¾æ¥å’Œç« åéƒ½æ”¾åœ¨äº†æ ‡ç­¾<code>&lt;a&gt;ã€&lt;/a&gt;</code>ä¹‹é—´ï¼ŒEgï¼š<code>&lt;a href=&quot;/1_1094/5403177.html&quot;&gt;ç¬¬ä¸€ç«  ä»–å«ç™½å°çº¯&lt;/a&gt;</code>ã€‚<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"listmain"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dt</span>&gt;</span>ã€Šä¸€å¿µæ°¸æ’ã€‹æœ€æ–°ç« èŠ‚åˆ—è¡¨<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/1_1094/15932394.html"</span>&gt;</span>ç¬¬1027ç«  ç¬¬åé“é—¨<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/1_1094/15923072.html"</span>&gt;</span>ç¬¬1026ç«  ç»ä¼¦é“æ³•ï¼<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/1_1094/15921862.html"</span>&gt;</span>ç¬¬1025ç«  é•¿ç”Ÿç¯ï¼<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>é€šè¿‡ä¸¤æ¬¡è°ƒç”¨BeautifulSoupï¼Œä¾¿å¯ä»¥è·å–ä¸€å¯¹æ ‡ç­¾<code>&lt;a&gt;ã€&lt;/a&gt;</code>ä¹‹é—´çš„å†…å®¹ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">req = requests.get(url = target) </span><br><span class="line">html = req.text</span><br><span class="line">div_bf = BeautifulSoup(html)</span><br><span class="line">div = div_bf.find_all(<span class="string">'div'</span>, class_ = <span class="string">'listmain'</span>)</span><br><span class="line">a_bf = BeautifulSoup(str(div[<span class="number">0</span>]))</span><br><span class="line">a = a_bf.find_all(<span class="string">'a'</span>)</span><br><span class="line"><span class="keyword">for</span> each <span class="keyword">in</span> a:</span><br><span class="line">     print(each.string, server + each.get(<span class="string">'href'</span>))</span><br></pre></td></tr></table></figure></p>
<h2 id="å®Œæ•´åœ°çˆ¬å–ä¸€éƒ¨å°è¯´ç¨‹åºæ•´åˆ"><a href="#å®Œæ•´åœ°çˆ¬å–ä¸€éƒ¨å°è¯´ç¨‹åºæ•´åˆ" class="headerlink" title="å®Œæ•´åœ°çˆ¬å–ä¸€éƒ¨å°è¯´ç¨‹åºæ•´åˆ"></a>å®Œæ•´åœ°çˆ¬å–ä¸€éƒ¨å°è¯´ç¨‹åºæ•´åˆ</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:UTF-8 -*-</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">downloader</span><span class="params">(object)</span>:</span></span><br><span class="line">	<span class="string">"""ä¸‹è½½å°è¯´ã€Šä¸€å¿µæ°¸æ’ã€‹"""</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">		self.server = <span class="string">"http://www.biqukan.com/"</span></span><br><span class="line">		self.target = <span class="string">"http://www.biqukan.com/1_1094/"</span></span><br><span class="line">		self.names = [] <span class="comment"># å­˜æ”¾ç« èŠ‚åç§°</span></span><br><span class="line">		self.urls = [] <span class="comment"># å­˜æ”¾æ¯ç« é“¾æ¥</span></span><br><span class="line">		self.nums = [] <span class="comment"># ç« èŠ‚æ•°é‡</span></span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">get_download_url</span><span class="params">(self)</span>:</span></span><br><span class="line">		<span class="string">"""è·å–ä¸‹è½½é“¾æ¥urlåŠæ¯ç« åç§°namesï¼Œä»¥listå½¢å¼æ”¾åˆ°å®ä¾‹åŒ–åçš„classä¸­"""</span></span><br><span class="line">		req = requests.get(url = self.target)</span><br><span class="line">		html = req.text</span><br><span class="line">		div_bf = BeautifulSoup(html)</span><br><span class="line">		div = div_bf.find_all(<span class="string">'div'</span>, class_ = <span class="string">'listmain'</span>)</span><br><span class="line">		<span class="comment"># è·å–åˆ°ç« èŠ‚åç§°çš„htmlä¿¡æ¯ï¼Œåœ¨class = 'listmain'ä¸­</span></span><br><span class="line">		a_bf = BeautifulSoup(str(div[<span class="number">0</span>])) </span><br><span class="line">		a = a_bf.find_all(<span class="string">'a'</span>) <span class="comment"># è¿”å›ä¸€ä¸ªlist</span></span><br><span class="line">		self.nums = len(a[<span class="number">15</span>:]) <span class="comment"># è¿‡æ»¤äº†å‰15æ¡å™ªå£°ç« èŠ‚</span></span><br><span class="line">		<span class="keyword">for</span> each <span class="keyword">in</span> a[<span class="number">15</span>:]:</span><br><span class="line">			self.names.append(each.string)</span><br><span class="line">			self.urls.append(self.server + each.get(<span class="string">'href'</span>))</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">get_contents</span><span class="params">(self, target)</span>:</span></span><br><span class="line">	    <span class="string">"""</span></span><br><span class="line"><span class="string">	    å‡½æ•°è¯´æ˜ï¼šè·å–class_listä¸­æ¯ä¸€ä¸ªurlä¸‹çš„å†…å®¹</span></span><br><span class="line"><span class="string">	    targetï¼šä¸‹è½½åœ°å€ </span></span><br><span class="line"><span class="string">	    return: texts - å†…å®¹(stringç±»å‹)</span></span><br><span class="line"><span class="string">	    """</span></span><br><span class="line">	    req = requests.get(url = target)	</span><br><span class="line">	    html = req.text</span><br><span class="line">	    bf = BeautifulSoup(html)</span><br><span class="line">	    texts = bf.find_all(<span class="string">'div'</span>, class_ = <span class="string">'showtxt'</span>)</span><br><span class="line">	    texts = texts[<span class="number">0</span>].text.replace(<span class="string">'\xa0'</span>*<span class="number">8</span>, <span class="string">'\n\n'</span>)</span><br><span class="line">	    <span class="keyword">return</span> texts</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">writer</span><span class="params">(self, name, path, text)</span>:</span></span><br><span class="line">		<span class="string">"""</span></span><br><span class="line"><span class="string">		å‡½æ•°è¯´æ˜ï¼šçˆ¬å–çš„textså†™å…¥æ–‡ä»¶</span></span><br><span class="line"><span class="string">		nameï¼šç« èŠ‚åç§°</span></span><br><span class="line"><span class="string">		pathï¼šæ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="string">		textï¼šç« èŠ‚å†…å®¹</span></span><br><span class="line"><span class="string">		"""</span></span><br><span class="line">		<span class="keyword">with</span> open(path, <span class="string">'a'</span>,encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">			f.write(name + <span class="string">'\n'</span>) <span class="comment"># writeåªèƒ½å†™å…¥str</span></span><br><span class="line">			f.writelines(text) <span class="comment"># è‡ªåŠ¨è¿­ä»£å†™å…¥ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨[str]</span></span><br><span class="line">			f.write(<span class="string">'\n\n'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">	dl = downloader() <span class="comment"># ç±»çš„å®ä¾‹åŒ–</span></span><br><span class="line">	dl.get_download_url() <span class="comment"># è·å–ç« èŠ‚åç§°ä¿¡æ¯ï¼Œæ›´æ–°ç±»ä¸­çš„listå˜é‡namesã€urlsã€nums</span></span><br><span class="line">	print(<span class="string">'å¼€å§‹ä¸‹è½½...'</span>)</span><br><span class="line">	<span class="comment"># print(type(dl.nums)) # intå‹ï¼Œè·Ÿæœ€åå®šä¹‰numsçš„å˜é‡ç›¸å…³</span></span><br><span class="line">	<span class="keyword">for</span> i <span class="keyword">in</span> range(dl.nums):</span><br><span class="line">		dl.writer(dl.names[i], <span class="string">'ä¸€å¿µæ°¸æ’.txt'</span>, dl.get_contents(dl.urls[i]))</span><br><span class="line">		sys.stdout.write(<span class="string">" å·²ç»ä¸‹è½½: %.3f%%"</span> % float(i/dl.nums) + <span class="string">'\r'</span>)</span><br><span class="line">		sys.stdout.flush()</span><br><span class="line">	print(<span class="string">"Success!"</span>)</span><br></pre></td></tr></table></figure>
<h2 id="Referï¼š"><a href="#Referï¼š" class="headerlink" title="Referï¼š"></a>Referï¼š</h2><p><a href="http://blog.csdn.net/u012662731/article/details/78537432" target="_blank" rel="noopener">Python3ç½‘ç»œçˆ¬è™«å¿«é€Ÿå…¥é—¨å®æˆ˜è§£æ</a><br><a href="http://www.imooc.com/learn/563" target="_blank" rel="noopener">Pythonå¼€å‘ç®€å•çˆ¬è™«</a><br><a href="https://www.zhihu.com/question/37787176" target="_blank" rel="noopener">å½“ä¸€ä¸ªé¢œå€¼å¾ˆé«˜çš„ç¨‹åºå‘˜æ˜¯æ€æ ·ä¸€ç•ªä½“éªŒï¼Ÿ</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/01/Linux/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç¥¥å‰">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79ly1fnu0obfmlbj30sg0iyabk.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Deep Coding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/01/Linux/" itemprop="url">Linuxæ“ä½œæ—¥æ›´è´´</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-02-01T16:16:28+08:00">
                2018-02-01
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/02/01/Linux/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/02/01/Linux/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="è·å–-var-www-ä¸‹æ‰€æœ‰æ–‡ä»¶åŠæ–‡ä»¶å¤¹çš„æ“ä½œæƒé™"><a href="#è·å–-var-www-ä¸‹æ‰€æœ‰æ–‡ä»¶åŠæ–‡ä»¶å¤¹çš„æ“ä½œæƒé™" class="headerlink" title="è·å–/var/www/ä¸‹æ‰€æœ‰æ–‡ä»¶åŠæ–‡ä»¶å¤¹çš„æ“ä½œæƒé™"></a>è·å–/var/www/ä¸‹æ‰€æœ‰æ–‡ä»¶åŠæ–‡ä»¶å¤¹çš„æ“ä½œæƒé™</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 777 -R /var/www/  <span class="comment"># ç”¨æˆ·ç›®å½•ä¸‹ï¼Œéœ€è¦åœ¨å‰é¢å†åŠ sudo</span></span><br></pre></td></tr></table></figure>
<h5 id="pipå®‰è£…è½¯ä»¶é•œåƒ"><a href="#pipå®‰è£…è½¯ä»¶é•œåƒ" class="headerlink" title="pipå®‰è£…è½¯ä»¶é•œåƒ"></a>pipå®‰è£…è½¯ä»¶é•œåƒ</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install -i https://pypi.tuna.tsinghua.edu.cn/simple xxx</span><br></pre></td></tr></table></figure>
<h5 id="pipå®‰è£…å›½å¤–è½¯ä»¶å¯èƒ½è¶…æ—¶çš„è§£å†³æ–¹æ³•"><a href="#pipå®‰è£…å›½å¤–è½¯ä»¶å¯èƒ½è¶…æ—¶çš„è§£å†³æ–¹æ³•" class="headerlink" title="pipå®‰è£…å›½å¤–è½¯ä»¶å¯èƒ½è¶…æ—¶çš„è§£å†³æ–¹æ³•"></a>pipå®‰è£…å›½å¤–è½¯ä»¶å¯èƒ½è¶…æ—¶çš„è§£å†³æ–¹æ³•</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip --default-timeout=100 install --upgrade gensim</span><br></pre></td></tr></table></figure>
<h5 id="pipå®‰è£…Tensorflowä»»æ„æŒ‡å®šç‰ˆæœ¬"><a href="#pipå®‰è£…Tensorflowä»»æ„æŒ‡å®šç‰ˆæœ¬" class="headerlink" title="pipå®‰è£…Tensorflowä»»æ„æŒ‡å®šç‰ˆæœ¬"></a>pipå®‰è£…Tensorflowä»»æ„æŒ‡å®šç‰ˆæœ¬</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install tensorflow-gpu=1.4.1</span><br><span class="line">https://pypi.python.org/pypi/tensorflow-gpu/1.2.0 <span class="comment"># whlæ–‡ä»¶ä¸‹è½½è·¯å¾„</span></span><br></pre></td></tr></table></figure>
<h5 id="è§£é™¤Ternsorboardç«¯å£å ç”¨"><a href="#è§£é™¤Ternsorboardç«¯å£å ç”¨" class="headerlink" title="è§£é™¤Ternsorboardç«¯å£å ç”¨"></a>è§£é™¤Ternsorboardç«¯å£å ç”¨</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lsof -i:6006  </span><br><span class="line"><span class="built_in">kill</span> -9 28508(ä¸Šä¸€ä¸ªå‘½ä»¤åå¼¹å‡ºçš„å®é™…ç«¯å£å·)</span><br></pre></td></tr></table></figure>
<h5 id="æ²¡æœ‰å®‰è£…tensorboard-æˆ–pythonç‰ˆæœ¬ä¸å¯¹ä»å…¶æºç æ‰“å¼€"><a href="#æ²¡æœ‰å®‰è£…tensorboard-æˆ–pythonç‰ˆæœ¬ä¸å¯¹ä»å…¶æºç æ‰“å¼€" class="headerlink" title="æ²¡æœ‰å®‰è£…tensorboard/æˆ–pythonç‰ˆæœ¬ä¸å¯¹ä»å…¶æºç æ‰“å¼€"></a>æ²¡æœ‰å®‰è£…tensorboard/æˆ–pythonç‰ˆæœ¬ä¸å¯¹ä»å…¶æºç æ‰“å¼€</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">locate tensorboard</span><br><span class="line">python2 /usr/<span class="built_in">local</span>/lib/python2.7/dist-packages/tensorflow/tensorboard/teorboard.py --logdir=</span><br></pre></td></tr></table></figure>
<h5 id="å®‰è£…pytorch"><a href="#å®‰è£…pytorch" class="headerlink" title="å®‰è£…pytorch"></a>å®‰è£…pytorch</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://tech.ifeng.com/a/20170921/44693375_0.shtml</span><br></pre></td></tr></table></figure>
<h5 id="ubuntu-teamviewe-å®‰è£…"><a href="#ubuntu-teamviewe-å®‰è£…" class="headerlink" title="ubuntu teamviewe å®‰è£…"></a>ubuntu teamviewe å®‰è£…</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get purge teamviewer <span class="comment"># å½»åº•ç§»é™¤æ—§çš„ç‰ˆæœ¬</span></span><br><span class="line">sudo apt install ./teamviewerxxx.whl</span><br></pre></td></tr></table></figure>
<h5 id="python2-7ï¼Œå‘½ä»¤è¡Œç•Œé¢è¾“å‡ºä¸­æ–‡å­—ç¬¦"><a href="#python2-7ï¼Œå‘½ä»¤è¡Œç•Œé¢è¾“å‡ºä¸­æ–‡å­—ç¬¦" class="headerlink" title="python2.7ï¼Œå‘½ä»¤è¡Œç•Œé¢è¾“å‡ºä¸­æ–‡å­—ç¬¦"></a>python2.7ï¼Œå‘½ä»¤è¡Œç•Œé¢è¾“å‡ºä¸­æ–‡å­—ç¬¦</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import uniout</span><br><span class="line">a = [u<span class="string">'å“ˆå“ˆ'</span>]  </span><br><span class="line"><span class="built_in">print</span> a  <span class="comment"># å“ˆå“ˆï¼Œå¦åˆ™ä¼šæœ‰unicodeç¼–ç é—®é¢˜[u'\u54c8\u54c8']</span></span><br></pre></td></tr></table></figure>
<h5 id="æŸ¥çœ‹ç¡¬ç›˜å®¹é‡åŠæ¶ˆè€—"><a href="#æŸ¥çœ‹ç¡¬ç›˜å®¹é‡åŠæ¶ˆè€—" class="headerlink" title="æŸ¥çœ‹ç¡¬ç›˜å®¹é‡åŠæ¶ˆè€—"></a>æŸ¥çœ‹ç¡¬ç›˜å®¹é‡åŠæ¶ˆè€—</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo du -h --max-depth=1 .|sort -rh |head <span class="comment">#æŸ¥çœ‹æ–‡ä»¶å¤¹/ç¨‹åºå ç”¨ï¼Œç”±é«˜åˆ°ä½æ’åº</span></span><br><span class="line">df -hl <span class="comment"># æŸ¥çœ‹åˆ†åŒºå®¹é‡</span></span><br></pre></td></tr></table></figure>
<h5 id="å¤šç‰ˆæœ¬cudaå®‰è£…åŠç¯å¢ƒåˆ‡æ¢"><a href="#å¤šç‰ˆæœ¬cudaå®‰è£…åŠç¯å¢ƒåˆ‡æ¢" class="headerlink" title="å¤šç‰ˆæœ¬cudaå®‰è£…åŠç¯å¢ƒåˆ‡æ¢"></a>å¤šç‰ˆæœ¬cudaå®‰è£…åŠç¯å¢ƒåˆ‡æ¢</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">é¦–å…ˆå°†~/.bashrc ä¸‹ä¸cudaç›¸å…³çš„è·¯å¾„éƒ½æ”¹ä¸ºã€€/usr/<span class="built_in">local</span>/cuda/ã€€</span><br><span class="line">rm -rf /usr/<span class="built_in">local</span>/cuda<span class="comment">#åˆ é™¤ä¹‹å‰åˆ›å»ºçš„è½¯é“¾æ¥</span></span><br><span class="line">sudo ln -s /usr/<span class="built_in">local</span>/cuda-8.0/ /usr/<span class="built_in">local</span>/cuda/ <span class="comment"># å»ºç«‹æ–°è¿æ¥</span></span><br><span class="line">nvcc --version <span class="comment">#æŸ¥çœ‹å½“å‰ cuda ç‰ˆæœ¬</span></span><br><span class="line">http://blog.csdn.net/maple2014/article/details/78574275</span><br></pre></td></tr></table></figure>
<h5 id="ubuntuæ¡Œé¢æ­»æœºè§£å†³"><a href="#ubuntuæ¡Œé¢æ­»æœºè§£å†³" class="headerlink" title="ubuntuæ¡Œé¢æ­»æœºè§£å†³"></a>ubuntuæ¡Œé¢æ­»æœºè§£å†³</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">top æŸ¥çœ‹ï¼Œè®°ä¸‹PIDåï¼Œqé€€å‡ºå³å¯ï¼Œè¾“å…¥ sudo <span class="built_in">kill</span> PID    </span><br><span class="line">sudo pkill Xorg æ³¨é”€æ¡Œé¢é‡æ–°ç™»å½•</span><br></pre></td></tr></table></figure>
<h5 id="æ‰¾ä¸åˆ°xxåŒ…ç›¸å…³é”™è¯¯â€¦cannot-find-lxxcâ€¦"><a href="#æ‰¾ä¸åˆ°xxåŒ…ç›¸å…³é”™è¯¯â€¦cannot-find-lxxcâ€¦" class="headerlink" title="æ‰¾ä¸åˆ°xxåŒ…ç›¸å…³é”™è¯¯â€¦cannot find -lxxcâ€¦"></a>æ‰¾ä¸åˆ°xxåŒ…ç›¸å…³é”™è¯¯â€¦cannot find -lxxcâ€¦</h5><p>å…ˆæ‰¾ä¸‹å…¶ä»–ç›®å½•ä¸­æ˜¯å¦å­˜åœ¨éœ€è¦çš„libæ–‡ä»¶ï¼Œæœ‰çš„è¯ä¸ç”¨ä¸‹è½½ï¼Œç›´æ¥æŒ‡å‘å°±å¥½äº†ã€‚æ‰¾åˆ°ç¼ºå¤±libæ–‡ä»¶çš„ç‰©ç†ä½ç½®ï¼Œä¹‹ååœ¨éœ€è¦çš„ç›®å½•ä¸­å»ºç«‹è½¯è¿æ¥<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">locate libc.so</span><br><span class="line">ln -s /usr/lib/x86_64-linux-gnu/libpthread.so /home/tucodec/miniconda3/compiler_compat/</span><br><span class="line">rm -rf libc.7.gz ç§»é™¤è½¯è¿æ¥</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/01/python-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç¥¥å‰">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79ly1fnu0obfmlbj30sg0iyabk.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Deep Coding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/01/python-2/" itemprop="url">pythonæ“ä½œ(å››)ï¼šIOç¼–ç¨‹/è°ƒç”¨shellè¯­å¥</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-02-01T11:02:03+08:00">
                2018-02-01
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/02/01/python-2/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/02/01/python-2/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="pythonè°ƒç”¨shellè¯­å¥"><a href="#pythonè°ƒç”¨shellè¯­å¥" class="headerlink" title="pythonè°ƒç”¨shellè¯­å¥"></a>pythonè°ƒç”¨shellè¯­å¥</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">å‡è®¾å·²å­˜åœ¨run.shçš„shellè¯­å¥ï¼Œå¦‚:</span></span><br><span class="line"><span class="string">cd /home/tucodec/Desktop </span></span><br><span class="line"><span class="string">python2 run.py</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.system(<span class="string">"bash run.sh"</span>) <span class="comment">#ä¼šè‡ªåŠ¨åˆ°æ¡Œé¢æ‰§è¡Œrun.py</span></span><br></pre></td></tr></table></figure>
<h4 id="ä¸Šé¢è°ƒç”¨shellè¯­å¥çš„æ–¹å¼ï¼Œè·Ÿpythonè¯­å¥æ˜¯ç‹¬ç«‹è¿›è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ— æ³•è¿›è¡Œå˜é‡çš„äº¤äº’"><a href="#ä¸Šé¢è°ƒç”¨shellè¯­å¥çš„æ–¹å¼ï¼Œè·Ÿpythonè¯­å¥æ˜¯ç‹¬ç«‹è¿›è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ— æ³•è¿›è¡Œå˜é‡çš„äº¤äº’" class="headerlink" title="ä¸Šé¢è°ƒç”¨shellè¯­å¥çš„æ–¹å¼ï¼Œè·Ÿpythonè¯­å¥æ˜¯ç‹¬ç«‹è¿›è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ— æ³•è¿›è¡Œå˜é‡çš„äº¤äº’"></a>ä¸Šé¢è°ƒç”¨shellè¯­å¥çš„æ–¹å¼ï¼Œè·Ÿpythonè¯­å¥æ˜¯ç‹¬ç«‹è¿›è¡Œçš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ— æ³•è¿›è¡Œå˜é‡çš„äº¤äº’</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">é‡‡ç”¨ä¸‹é¢çš„è¯­å¥å¯ä»¥å®ç°åœ¨pythonä¸­æ“ä½œæ–‡ä»¶/æ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line">file_dir = <span class="string">'/Users/wxj/Desktop'</span></span><br><span class="line"><span class="keyword">print</span> (os.getcwd())  <span class="comment"># è·å–å½“å‰ç›®å½•</span></span><br><span class="line">os.chdir(file_dir)   <span class="comment"># æ”¹å˜å·¥ä½œç›®å½•</span></span><br><span class="line">os.mkdir(<span class="string">"test"</span>)  <span class="comment"># åˆ›å»ºæ–‡ä»¶å¤¹</span></span><br><span class="line"></span><br><span class="line">os.rename(<span class="string">"test"</span>,<span class="string">"test1"</span>)   </span><br><span class="line">os.rename(<span class="string">"test.txt"</span>,<span class="string">"test1.txt"</span>)  <span class="comment"># é‡å‘½åï¼Œæ³¨æ„éœ€è¦å¸¦æ‰©å±•å</span></span><br><span class="line"></span><br><span class="line">shutil.copyfile(<span class="string">"test_org.txt"</span>,<span class="string">"test1.txt"</span>)  <span class="comment"># å­˜åœ¨åˆ™è¦†ç›–ï¼Œç”¨äºcopyæ–‡ä»¶</span></span><br><span class="line">shutil.copytree(<span class="string">"/Users/wxj/Desktop/1"</span>,<span class="string">"/Users/wxj/Desktop/2"</span>) <span class="comment"># 2æ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œç”¨äºcopyæ–‡ä»¶å¤¹</span></span><br><span class="line"></span><br><span class="line">shutil.move(<span class="string">"/Users/wxj/Desktop/1"</span>,<span class="string">"/Users/wxj/Desktop/2"</span>ï¼‰ <span class="comment"># 2æ–‡ä»¶å¤¹å­˜åœ¨ï¼Œç”¨äºç§»åŠ¨æ–‡ä»¶å¤¹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> os.path.exists(path_x): <span class="comment"># åˆ¤å®šæ˜¯å¦å­˜åœ¨æŸä¸ªæ–‡ä»¶å¤¹</span></span><br><span class="line">    shutil.rmtree(Path_x)  <span class="comment"># åˆ é™¤æ–‡ä»¶å¤¹</span></span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/02/01/python2-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç¥¥å‰">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79ly1fnu0obfmlbj30sg0iyabk.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Deep Coding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/02/01/python2-3/" itemprop="url">pythonæ“ä½œ(ä¸‰)ï¼šUnicodeç¼–ç </a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-02-01T10:32:45+08:00">
                2018-02-01
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/02/01/python2-3/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/02/01/python2-3/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>ä¸­æ–‡å­—ç¬¦ä¸€èˆ¬éƒ½æ˜¯ç¼–ç ä¸º<code>Unicode</code>å­˜å‚¨åœ¨è®¡ç®—æœºä¸­çš„ï¼Œç„¶è€Œè¡¨ç°å½¢å¼å´å¤§ä¸ç›¸åŒï¼Œæœ‰çš„ç¨‹åºå–œæ¬¢ç»™ä½ è¾“å‡ºä¸­æ–‡ï¼Œæœ‰çš„å–œæ¬¢è¾“å‡ºä¹±ç ï¼ŒEgï¼š<code>&#39;\xe5\xbc\xa0\xe4\xbf\x8a&#39;</code>ã€‚python2/3ä¸­çš„å­—ç¬¦ä¸²ç¼–ç ï¼Œå°±æœ‰è¿™æ ·çš„é—®é¢˜ï¼Œåœ¨æ­¤è¿›è¡Œæ¢³ç†ï¼Œæœ‰å¤‡æ— æ‚£ã€‚</p>
<h3 id="ASCIIã€Unicodeå’ŒUTF-8å…³ç³»"><a href="#ASCIIã€Unicodeå’ŒUTF-8å…³ç³»" class="headerlink" title="ASCIIã€Unicodeå’ŒUTF-8å…³ç³»"></a>ASCIIã€Unicodeå’ŒUTF-8å…³ç³»</h3><p>ç”±äº1ä¸ªå­—èŠ‚(byte) == 8ä½(bit)ï¼Œæ‰€ä»¥1å­—èŠ‚æœ€å¤šå¯ä»¥è¡¨ç¤º256ä¸ªå­—ç¬¦ã€‚ç¾å›½äººåœ¨å‘æ˜è®¡ç®—æœºæ—¶å€™ï¼Œè‹±æ–‡å­—æ¯(å¤§å°å†™å…±64ä¸ª)ï¼ŒåŠ ä¸Šä¸€äº›æ ‡ç‚¹ç¬¦å·ï¼Œ256ä¸ªå­—ç¬¦å®‰å…¨å¤Ÿç”¨ã€‚è¿™ä¸ªç¼–ç å°±è¢«ç§°ä¸º<code>ASCII</code>ç¼–ç ã€‚æ¯”å¦‚â€™Aâ€™å¯¹åº”ASCIIç è¡¨ä¸­çš„65ï¼Œâ€™zâ€™å¯¹åº”122ã€‚<br><img src="/img/python_1.jpeg" alt=""><br>ä½†æˆ‘ä»¬çš„ä¸­æ–‡åšå¤§ç²¾æ·±ï¼Œ256ä¸ªå­—ç¬¦æ˜¾ç„¶ä¸èƒ½è¦†ç›–å…¨éƒ¨å­—ç¬¦ï¼Œæ‰€ä»¥ä¸­å›½åˆ¶å®šäº†2å­—èŠ‚çš„GB2312ç¼–ç (GBKæ˜¯GB2312çš„æ‰©å……ï¼ŒåŒ…å«çš„ä¸­æ–‡å­—ç¬¦æ›´å¤š)ã€‚æ— ç‹¬æœ‰å¶ï¼Œå„ä¸ªå›½å®¶éƒ½åˆ¶å®šäº†è‡ªå·±çš„è§„åˆ™æŠŠæœ¬å›½çš„æ–‡å­—ç¼–å†™è¿›å»ã€‚ä¸ºäº†ç»Ÿä¸€å„ä¸ªè¯­è¨€ä¹‹é—´çš„ç¼–ç ï¼Œ<code>Unicode</code>åº”è¿è€Œç”Ÿï¼Œå…·ä½“æ¥è¯´ï¼ŒASCIIç”¨1ä¸ªå­—èŠ‚è¡¨ç¤ºå­—ç¬¦ï¼ŒUnicodeç”¨2ä¸ªå­—èŠ‚ï¼Œå¯¹äºä¸€äº›ç‰¹æ®Šç¬¦å·ï¼Œç”šè‡³ä½¿ç”¨4ä¸ªå­—èŠ‚ã€‚ASCIIç¼–ç çš„â€™Aâ€™ç”¨Unicodeç¼–ç ï¼Œåªéœ€è¦åœ¨å‰é¢è¡¥0å°±å¯ä»¥äº†ã€‚</p>
<blockquote>
<p>è™½ç„¶ä¹±ç æ¶ˆå¤±ï¼Œä½†å´é€ æˆäº†æ–°çš„é—®é¢˜ï¼šå¦‚æœä½ å†™çš„æ–‡æœ¬åŸºæœ¬ä¸Šéƒ½æ˜¯è‹±è¯­ï¼Œé‚£ç”¨Unicodeç¼–ç æ¯”ASCIIç¼–ç éœ€è¦å¤šä¸€å€çš„å­˜å‚¨ç©ºé—´ï¼Œåœ¨å­˜å‚¨å’Œä¼ è¾“ä¸Šå°±ååˆ†ä¸åˆ’ç®—ã€‚</p>
</blockquote>
<p><code>UTF-8</code>ç¼–ç å†æ¬¡è¢«å‘æ˜ï¼Œå®ƒæ˜¯å¯¹Unicodeç¼–ç çš„<code>å†ç¼–ç </code>ï¼Œå¯¹äºå¸¸ç”¨çš„è‹±æ–‡ç¼–ç ä¸º1å­—èŠ‚ï¼Œæ±‰å­é€šå¸¸ä¸º3å­—èŠ‚ã€‚å¦‚æœéœ€è¦ä¼ è¾“ã€ä¿å­˜çš„æ–‡æœ¬å«æœ‰å¤§é‡åº”ä¸ºï¼Œè¿™æ ·çš„ç¼–ç å¯ä»¥å‡å°‘å¸¦å®½ï¼Œå‡å°‘ç¡¬ç›˜æˆæœ¬ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š<br><img src="/img/python_2.jpeg" alt=""></p>
<h2 id="python2"><a href="#python2" class="headerlink" title="python2"></a>python2</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Python 2.7.10 (default, Jul 15 2017, 17:16:57) </span><br><span class="line">[GCC 4.2.1 Compatible Apple LLVM 9.0.0 (clang-900.0.31)] on darwin</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; <span class="string">'ä¸­å›½'</span> <span class="comment"># python2ä¸­é»˜è®¤è½¬æ¢ä¸ºUTF-8ç¼–ç çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="string">'\xe4\xb8\xad\xe5\x9b\xbd'</span></span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; u<span class="string">'ä¸­å›½'</span> <span class="comment"># å­—ç¬¦ä¸²å‰+'u'ï¼Œä»£è¡¨æŒ‡å®šUnicodeç¼–ç </span></span><br><span class="line">u<span class="string">'\u4e2d\u56fd'</span></span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; <span class="string">'ä¸­å›½'</span>.decode(<span class="string">'utf-8'</span>) <span class="comment"># utf-8ç±»å‹å­—ç¬¦ä¸²è§£ç ä¸ºUnicodeç¼–ç </span></span><br><span class="line">u<span class="string">'\u4e2d\u56fd'</span></span><br></pre></td></tr></table></figure>
<h2 id="python3"><a href="#python3" class="headerlink" title="python3"></a>python3</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Python 3.5.3 (v3.5.3:1880cb95a742, Jan 16 2017, 08:49:46) </span><br><span class="line">[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; <span class="string">'ä¸­å›½'</span> <span class="comment"># python3ä¸­é»˜è®¤ä¸ºUnicodeæ ¼å¼(æ— ç¼–ç )ï¼ŒåŒu'ä¸­å›½'</span></span><br><span class="line"><span class="string">'ä¸­å›½'</span></span><br><span class="line">&lt;class <span class="string">'str'</span>&gt;</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; <span class="string">'ä¸­å›½'</span>.encode(<span class="string">'utf-8'</span>) <span class="comment">#è½¬UTF-8ç¼–ç </span></span><br><span class="line">b<span class="string">'\xe4\xb8\xad\xe5\x9b\xbd'</span></span><br><span class="line">&lt;class <span class="string">'bytes'</span>&gt;</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span> (<span class="string">'ä¸­å›½'</span>.encode(<span class="string">'utf-8'</span>).decode(<span class="string">'utf-8'</span>)) </span><br><span class="line"><span class="string">'ä¸­å›½'</span></span><br></pre></td></tr></table></figure>
<h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><blockquote>
<ul>
<li>python2ä¸­å­—ç¬¦ä¸²æœ‰strå’Œunicodeä¸¤ç§ç±»å‹ï¼Œstræœ‰å„ç§ç¼–ç åŒºåˆ«(UTF-8ã€GBKç­‰)ï¼Œunicodeæ˜¯æ²¡æœ‰ç¼–ç çš„æ ‡å‡†å½¢å¼ã€‚unicodeé€šè¿‡encodeè½¬åŒ–æˆstrï¼Œstré€šè¿‡decodeè½¬åŒ–æˆunicodeã€‚</li>
<li>python3ä¸­å­—ç¬¦ä¸²æœ‰strå’Œbytesä¸¤ç§ç±»å‹ï¼Œå­—ç¬¦ä¸²strä¸python2ä¸­unicodeç±»ä¼¼æ˜¯æ ‡å‡†å½¢å¼ï¼Œbytesç±»ä¼¼python2ä¸­çš„stræœ‰å„ç§ç¼–ç åŒºåˆ«ã€‚æ‰€ä»¥åœ¨python3ä¸­æŸ¥çœ‹æŸä¸ªå­—ç¬¦ä¸²çš„ç¼–ç åºåˆ—ï¼Œåªèƒ½å…ˆå°†strç¼–ç ä¸ºä¸€å®šå½¢å¼çš„bytesæ•°æ®ï¼Œç„¶åå†è¾“å‡º</li>
</ul>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Python 3.5.3 (v3.5.3:1880cb95a742, Jan 16 2017, 08:49:46) </span><br><span class="line">[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin</span><br><span class="line"></span><br><span class="line">&gt;&gt;&gt; ss = <span class="string">'åŒ—äº¬å¸‚'</span>  </span><br><span class="line">&gt;&gt;&gt; <span class="built_in">type</span>(ss)  </span><br><span class="line">&lt;class <span class="string">'str'</span>&gt;  </span><br><span class="line">&gt;&gt;&gt; us = ss.encode(<span class="string">'gbk'</span>)  </span><br><span class="line">&gt;&gt;&gt; <span class="built_in">type</span>(us)  </span><br><span class="line">&lt;class <span class="string">'bytes'</span>&gt;  </span><br><span class="line">&gt;&gt;&gt; us  </span><br><span class="line">b<span class="string">'\xb1\xb1\xbe\xa9\xca\xd0'</span></span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/30/python-str/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç¥¥å‰">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79ly1fnu0obfmlbj30sg0iyabk.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Deep Coding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/30/python-str/" itemprop="url">pythonæ“ä½œ(äºŒ)ï¼šå­—ç¬¦ä¸²</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-01-30T22:05:21+08:00">
                2018-01-30
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/01/30/python-str/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/01/30/python-str/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="æ‰¾å‡ºæœ€åä¸€ä¸ªä»¥â€™-â€™å¼€å§‹çš„å­—ç¬¦ä¸²"><a href="#æ‰¾å‡ºæœ€åä¸€ä¸ªä»¥â€™-â€™å¼€å§‹çš„å­—ç¬¦ä¸²" class="headerlink" title="æ‰¾å‡ºæœ€åä¸€ä¸ªä»¥â€™.â€™å¼€å§‹çš„å­—ç¬¦ä¸²"></a>æ‰¾å‡ºæœ€åä¸€ä¸ªä»¥â€™.â€™å¼€å§‹çš„å­—ç¬¦ä¸²</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç¬¬ä¸€ç§æ–¹æ³•</span></span><br><span class="line">filename = <span class="string">"/home/tucodec/ZJU.mp4"</span></span><br><span class="line">str_1 = filename[filename.rindex(<span class="string">"."</span>):] <span class="comment"># rindexï¼šè¿”å›æœ€åä¸€ä¸ª'.'çš„ä½ç½®ä¿¡æ¯</span></span><br><span class="line">print(str1) <span class="comment"># è¾“å‡ºâ€œ.mp4â€</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬¬äºŒç§æ–¹æ³•</span></span><br><span class="line">str_1 = filename.split(<span class="string">'.'</span>)[<span class="number">-1</span>]</span><br></pre></td></tr></table></figure>
<h4 id="è·å–æŸæ–‡ä»¶å¤¹ä¸‹åŒ…å«æ–‡ä»¶åç§°çš„ç»å¯¹è·¯å¾„"><a href="#è·å–æŸæ–‡ä»¶å¤¹ä¸‹åŒ…å«æ–‡ä»¶åç§°çš„ç»å¯¹è·¯å¾„" class="headerlink" title="è·å–æŸæ–‡ä»¶å¤¹ä¸‹åŒ…å«æ–‡ä»¶åç§°çš„ç»å¯¹è·¯å¾„"></a>è·å–æŸæ–‡ä»¶å¤¹ä¸‹åŒ…å«æ–‡ä»¶åç§°çš„ç»å¯¹è·¯å¾„</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">all_path</span><span class="params">(dirname)</span>:</span></span><br><span class="line">    result = []</span><br><span class="line">    <span class="keyword">for</span> maindir, subdir, file_name_list <span class="keyword">in</span> os.walk(dirname):</span><br><span class="line">        <span class="keyword">for</span> filename <span class="keyword">in</span> file_name_list:</span><br><span class="line">            apath = os.path.join(maindir, filename)</span><br><span class="line">            result.append(apath)</span><br><span class="line">    <span class="keyword">return</span> result</span><br></pre></td></tr></table></figure>
<h4 id="è·å–æ–‡ä»¶ä¸‹æ–‡ä»¶åç§°çš„å¦ä¸€ç§æ–¹å¼"><a href="#è·å–æ–‡ä»¶ä¸‹æ–‡ä»¶åç§°çš„å¦ä¸€ç§æ–¹å¼" class="headerlink" title="è·å–æ–‡ä»¶ä¸‹æ–‡ä»¶åç§°çš„å¦ä¸€ç§æ–¹å¼"></a>è·å–æ–‡ä»¶ä¸‹æ–‡ä»¶åç§°çš„å¦ä¸€ç§æ–¹å¼</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">result = [] </span><br><span class="line">alllist=os.listdir(<span class="string">"/Users/wxj/Desktop/1"</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> alllist:</span><br><span class="line">    <span class="keyword">if</span> <span class="string">"."</span> <span class="keyword">in</span> i:</span><br><span class="line">        aa, bb=i.split(<span class="string">"."</span>)</span><br><span class="line">        <span class="keyword">if</span> bb == <span class="string">"txt"</span>:</span><br><span class="line">            result.append(aa+<span class="string">"."</span>+bb)</span><br></pre></td></tr></table></figure>
<h4 id="3ç§è¿æ¥å­—ç¬¦ä¸²æ–¹å¼"><a href="#3ç§è¿æ¥å­—ç¬¦ä¸²æ–¹å¼" class="headerlink" title="3ç§è¿æ¥å­—ç¬¦ä¸²æ–¹å¼"></a>3ç§è¿æ¥å­—ç¬¦ä¸²æ–¹å¼</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">seq1 = [<span class="string">'hello'</span>,<span class="string">'good'</span>,<span class="string">'boy'</span>,<span class="string">'doiido'</span>]</span><br><span class="line"><span class="keyword">print</span> <span class="string">' '</span>.join(seq1) <span class="comment"># å·²ç©ºæ ¼ç¬¦è¿æ¥ä¸€ä¸ªlistä¸­çš„å­—ç¬¦ä¸²</span></span><br><span class="line">è¾“å‡ºï¼šhello good boy doiido</span><br><span class="line">===============================================</span><br><span class="line">os.path.join(<span class="string">'/hello/'</span>,<span class="string">'good/boy/'</span>,<span class="string">'doiido'</span>) <span class="comment"># åˆå¹¶ç›®å½•</span></span><br><span class="line">è¾“å‡ºï¼š<span class="string">'/hello/good/boy/doiido'</span> <span class="comment"># è¿™æ ·å¯ä»¥æ­£ç¡®å¤„ç†ä¸åŒæ“ä½œç³»ç»Ÿçš„è·¯å¾„åˆ†éš”ç¬¦</span></span><br><span class="line">===============================================</span><br><span class="line">a = <span class="string">'/hello/'</span></span><br><span class="line">b = <span class="string">'good/boy/'</span></span><br><span class="line">print(a+b)  </span><br><span class="line">è¾“å‡ºï¼š<span class="string">'/hello/good/boy/'</span></span><br></pre></td></tr></table></figure>
<h4 id="åˆ†å‰²å­—ç¬¦ä¸²æˆlist"><a href="#åˆ†å‰²å­—ç¬¦ä¸²æˆlist" class="headerlink" title="åˆ†å‰²å­—ç¬¦ä¸²æˆlist"></a>åˆ†å‰²å­—ç¬¦ä¸²æˆlist</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">line = <span class="string">"æˆ‘ä»¬ å¤§ ä¸­å›½"</span></span><br><span class="line">line.split()</span><br><span class="line">[<span class="string">'æˆ‘ä»¬'</span>, <span class="string">'å¤§'</span>, <span class="string">'ä¸­å›½'</span>]</span><br></pre></td></tr></table></figure>
<h4 id="åˆ é™¤ä¸åŒä½ç½®çš„ç©ºæ ¼"><a href="#åˆ é™¤ä¸åŒä½ç½®çš„ç©ºæ ¼" class="headerlink" title="åˆ é™¤ä¸åŒä½ç½®çš„ç©ºæ ¼"></a>åˆ é™¤ä¸åŒä½ç½®çš„ç©ºæ ¼</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">s.strip(rm)        <span class="comment">#åˆ é™¤så­—ç¬¦ä¸²ä¸­å¼€å¤´ã€ç»“å°¾å¤„ï¼Œä½äºrmåˆ é™¤åºåˆ—çš„å­—ç¬¦</span></span><br><span class="line">s.lstrip(rm)       <span class="comment">#åˆ é™¤så­—ç¬¦ä¸²ä¸­å¼€å¤´å¤„</span></span><br><span class="line">s.rstrip(rm)      <span class="comment">#åˆ é™¤så­—ç¬¦ä¸²ä¸­ç»“å°¾å¤„</span></span><br><span class="line"><span class="comment"># rmåˆ é™¤åºåˆ—æ˜¯åªè¦è¾¹ï¼ˆå¼€å¤´æˆ–ç»“å°¾ï¼‰ä¸Šçš„å­—ç¬¦åœ¨åˆ é™¤åºåˆ—å†…ï¼Œå°±åˆ é™¤æ‰</span></span><br><span class="line">a = <span class="string">'123abc'</span></span><br><span class="line">a.strip(<span class="string">'21'</span>)</span><br><span class="line">a.strip(<span class="string">'12'</span>)</span><br><span class="line"><span class="comment"># ç»“æœæ˜¯ä¸€æ ·çš„ï¼š'3abc'</span></span><br></pre></td></tr></table></figure>
<h4 id="pythonå…¨å±€å˜é‡"><a href="#pythonå…¨å±€å˜é‡" class="headerlink" title="pythonå…¨å±€å˜é‡"></a>pythonå…¨å±€å˜é‡</h4><p>Python ä¸­åªæœ‰æ¨¡å—ï¼ˆmoduleï¼‰ï¼Œç±»ï¼ˆclassï¼‰ä»¥åŠå‡½æ•°ï¼ˆdefã€lambdaï¼‰æ‰ä¼šå¼•å…¥æ–°çš„ä½œç”¨åŸŸï¼Œå…¶å®ƒçš„ä»£ç å—æ˜¯ä¸ä¼šå¼•å…¥æ–°çš„ä½œç”¨åŸŸçš„ã€‚<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">True</span>:</span><br><span class="line">    msg = <span class="string">'I am from Runoob'</span></span><br><span class="line">print(msg)  <span class="comment"># 'I am from Runoob'</span></span><br><span class="line"><span class="comment">#=============global=======nonlocal===================</span></span><br><span class="line"><span class="keyword">global</span> str1 <span class="comment"># åœ¨ç»™å…¨å±€å˜é‡str1èµ‹å€¼æ—¶ï¼Œéœ€è¦å…ˆå£°æ˜globalï¼Œå¦åˆ™str1ä¼šè¢«å½“ä½œæ–°å®šä¹‰çš„å±€éƒ¨å˜é‡</span></span><br><span class="line">str1 = <span class="string">"new year"</span></span><br><span class="line">str2 = str1 <span class="comment"># å…¨å±€å˜é‡èµ‹å€¼ç»™å¦ä¸€ä¸ªå±€éƒ¨å˜é‡æ—¶ï¼Œä¸éœ€globalå£°æ˜ï¼Œç¨‹åºä¼šå…ˆæ‰¾å±€éƒ¨å˜é‡str1ï¼Œæ²¡å¾—è¯å°±å»å…¨å±€å˜é‡åŒºåŸŸæ‰¾</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">()</span>:</span></span><br><span class="line">    str1 = <span class="string">"ä¸­å›½"</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">func_1</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="keyword">nonlocal</span> str1</span><br><span class="line">        str1 = <span class="string">"å—äº¬"</span>  <span class="comment">#ä¿®æ”¹åµŒå¥—ä½œç”¨åŸŸï¼ˆå‡½æ•°Açš„å˜é‡ä½œç”¨åœ¨å­å‡½æ•°Bæ—¶ï¼‰ä¸­çš„å˜é‡éœ€è¦ä½¿ç”¨ nonlocal å…³é”®å­—</span></span><br></pre></td></tr></table></figure></p>
<h4 id="python-listã€dictã€tupleã€set"><a href="#python-listã€dictã€tupleã€set" class="headerlink" title="python listã€dictã€tupleã€set"></a>python listã€dictã€tupleã€set</h4><p>setï¼šé€šè¿‡set.add()å‡½æ•°æ·»åŠ å…ƒç´ ï¼Œsetä¼šè‡ªåŠ¨å»é‡ï¼Œä¸”æŸ¥æ‰¾æ•ˆç‡é«˜(hash)<br>tupleæ˜¯åªè¯»çš„list()ï¼Œlistå¯ä»¥é€šè¿‡ä¸‹æ ‡ã€å¾ªç¯ç­‰æ–¹å¼è®¿é—®ï¼Œé€šè¿‡.append()æ¥è®¿é—®<br>dictæ˜¯keyã€valueä¸€ä¸€å¯¹åº”çš„å…³ç³»ï¼Œå¸¸ç”¨äºåºå·è·ŸçœŸå€¼ä¹‹é—´çš„æŸ¥è¯¢ï¼Œæ¯”å¦‚NMTä»»åŠ¡çš„vocab<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dict1 = &#123;<span class="string">'1'</span>:<span class="string">'é£æœº'</span>,<span class="string">'2'</span>:<span class="string">'è‡ªè¡Œè½¦'</span>,<span class="string">'3'</span>:<span class="string">'é¸Ÿ'</span>,<span class="string">'4'</span>:<span class="string">'èˆ¹'</span>,<span class="string">'5'</span>:<span class="string">'ç“¶å­'</span>,<span class="string">'6'</span>:<span class="string">'å…¬å…±æ±½è½¦'</span>,<span class="string">'7'</span>:<span class="string">'è½¦'</span>,<span class="string">'8'</span>:<span class="string">'çŒ«'</span>,<span class="string">'9'</span>:<span class="string">'æ¤…å­'</span>,<span class="string">'10'</span>:<span class="string">'ç‰›'</span>,<span class="string">'11'</span>:<span class="string">'é¤æ¡Œ'</span>,<span class="string">'12'</span>:<span class="string">'ç‹—'</span>, \</span><br><span class="line">    <span class="string">'13'</span>:<span class="string">'é©¬'</span>,<span class="string">'14'</span>:<span class="string">'æ‘©æ‰˜è½¦'</span>,<span class="string">'15'</span>:<span class="string">'äºº'</span>,<span class="string">'16'</span>:<span class="string">'æ¤ç‰©'</span>,<span class="string">'17'</span>:<span class="string">'ç¾Š'</span>,<span class="string">'18'</span>:<span class="string">'æ²™å‘'</span>,<span class="string">'19'</span>:<span class="string">'ç«è½¦'</span>,<span class="string">'20'</span>:<span class="string">'ç”µè§†'</span>&#125;</span><br><span class="line">    <span class="keyword">for</span> str_i <span class="keyword">in</span> list(A):</span><br><span class="line">    List.append(dict1[str_i]) <span class="comment">#listAä¸­æ˜¯ä¸€ä¸ªçº¯æ•°å­—åˆ—è¡¨ï¼ŒLISTä¸­å¯¹åº”å…¶åœ¨å­—å…¸ä¸­çš„çœŸå®ç±»åˆ«</span></span><br></pre></td></tr></table></figure></p>
<h4 id="writeã€writelinesåŒºåˆ«"><a href="#writeã€writelinesåŒºåˆ«" class="headerlink" title="writeã€writelinesåŒºåˆ«"></a>writeã€writelinesåŒºåˆ«</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">f.write(name + <span class="string">'\n'</span>) <span class="comment"># writeåªèƒ½å†™å…¥str</span></span><br><span class="line">f.writelines(text) <span class="comment"># è‡ªåŠ¨è¿­ä»£å†™å…¥ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨[str]</span></span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/30/socket/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç¥¥å‰">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79ly1fnu0obfmlbj30sg0iyabk.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Deep Coding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/30/socket/" itemprop="url">pythonæ“ä½œ(ä¸€)ï¼šç½‘ç»œç¼–ç¨‹å…¥é—¨</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-01-30T20:54:55+08:00">
                2018-01-30
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/01/30/socket/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/01/30/socket/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="èƒŒæ™¯ç®€ä»‹"><a href="#èƒŒæ™¯ç®€ä»‹" class="headerlink" title="èƒŒæ™¯ç®€ä»‹"></a>èƒŒæ™¯ç®€ä»‹</h3><p>æœ€è¿‘åšçš„æ–‡æœ¬ç›¸ä¼¼åº¦åŒ¹é…ä»»åŠ¡ï¼Œéœ€è¦éƒ¨ç½²åˆ°webç«¯ï¼Œæ¯«æ— ç½‘ç»œèƒŒæ™¯çŸ¥è¯†çš„ç¬”è€…åœ¨è€æ¿çš„â€œå‹æ¦¨â€ä¸‹ï¼Œ3å¤©é€Ÿæˆäº†python websocketé€šä¿¡ï¼Œå¹¶äºå…¬å¸<code>json</code>å°å“¥åˆä½œï¼Œå®ç°äº†å›¾ç‰‡ã€æ–‡æœ¬çš„server-clientç«¯é€šä¿¡ã€‚<br><img src="/img/Http.jpg" alt=""><br>æ•´ä¸ªè¦å®Œæˆçš„æ¶æ„å¦‚ä¸Šå›¾æ‰€ç¤ºï¼šClient sendä¸€ä¸ªâ€œå­—ç¬¦ä¸²/å›¾ç‰‡â€ç»™Serverï¼ŒServerè¿›è¡Œä¸€ç³»åˆ—è¿ç®—åï¼Œsendâ€œå­—ç¬¦ä¸²/å›¾ç‰‡â€ç»™Clientï¼Œå®Œæˆä¸€æ¬¡é€šä¿¡ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬åªè®°å½•<code>çº¢å—</code>ã€<code>é»„å—</code>å†…çš„å·¥ä½œå†…å®¹ã€‚</p>
<h4 id="ç½‘ç»œè¿›ç¨‹ä¹‹é—´å¦‚ä½•é€šä¿¡ï¼Ÿ"><a href="#ç½‘ç»œè¿›ç¨‹ä¹‹é—´å¦‚ä½•é€šä¿¡ï¼Ÿ" class="headerlink" title="ç½‘ç»œè¿›ç¨‹ä¹‹é—´å¦‚ä½•é€šä¿¡ï¼Ÿ"></a>ç½‘ç»œè¿›ç¨‹ä¹‹é—´å¦‚ä½•é€šä¿¡ï¼Ÿ</h4><p>TCP/IPåè®®å¯ä»¥å”¯ä¸€çš„æ ‡è¯†ç½‘ç»œä¸­çš„ä¸»æœºï¼Œå³â€œç½‘ç»œå±‚çš„IPåœ°å€â€ï¼›ä¸»æœºä¸­çš„åº”ç”¨ç¨‹åºï¼ˆè¿›ç¨‹ï¼‰ï¼Œé€šè¿‡â€œåè®®+ç«¯å£â€çš„å½¢å¼æŒ‡å®šï¼›åˆ©ç”¨è¿™æ ·çš„â€œIPåœ°å€+åè®®+ç«¯å£â€çš„ä¸‰å…ƒç»„ï¼Œå°±å¯ä»¥æ ‡è¯†ç½‘ç»œä¸­çš„å”¯ä¸€ä¸€ä¸ªè¿›ç¨‹äº†<br>è€Œç¼–å†™/æ“ä½œTCP/IPåè®®çš„åº”ç”¨ç¨‹åºæ¥å£ï¼Œé€šå¸¸é‡‡ç”¨socketå¥—æ¥å­—ã€‚æœ‰ä¸€äº›å‰è¾ˆçš„ç›´è§‚è§£é‡Šæ˜¯ï¼šsocketç±»ä¼¼äºæ–‡ä»¶æ“ä½œçš„â€œopenâ€”write/readâ€”closeâ€æ¨¡å¼ï¼Œåªæ˜¯å°†å…¶åº”ç”¨åœ¨äº†TCP/IPåè®®ä¸Š</p>
<h3 id="socketçš„åŸºæœ¬æ“ä½œå‡½æ•°ï¼š"><a href="#socketçš„åŸºæœ¬æ“ä½œå‡½æ•°ï¼š" class="headerlink" title="socketçš„åŸºæœ¬æ“ä½œå‡½æ•°ï¼š"></a>socketçš„åŸºæœ¬æ“ä½œå‡½æ•°ï¼š</h3><h4 id="socket-å‡½æ•°"><a href="#socket-å‡½æ•°" class="headerlink" title="socket()å‡½æ•°"></a>socket()å‡½æ•°</h4><p>int socket(int domain, int type, int protocol)<br>socketå‡½æ•°å¯¹åº”äºä¸€ä¸ªæ™®é€šçš„æ–‡ä»¶æ‰“å¼€æ“ä½œï¼Œè¿”å›ä¸€ä¸ªsocketæè¿°å­—ï¼Œåç»­çš„æ“ä½œéƒ½æœ‰ç”¨åˆ°å®ƒï¼ŒæŠŠå®ƒä½œä¸ºå‚æ•°ï¼Œé€šè¿‡å®ƒæ¥è¿›è¡Œä¸€äº›è¯»å†™æ“ä½œã€‚é€šè¿‡è°ƒç”¨bind()å‡½æ•°ç»™è¯¥æè¿°å­—åˆ†é…ä¸€ä¸ªç«¯å£(PORT)ï¼Œå¦‚æœä¸æŒ‡å®šä¼šéšæœºåˆ†é…<br>domain:åœ°å€ç±»å‹ï¼Œå¦‚ï¼šAF_INETå†³å®šäº†è¦ç”¨ipv4åœ°å€<br>typeï¼šsocketç±»å‹<br>protocolï¼šTCP/IPç­‰ä¼ è¾“åè®®ï¼Œé»˜è®¤é€‰æ‹©è·Ÿtypeç±»å‹å¯¹åº”çš„åè®®</p>
<h4 id="bind-å‡½æ•°"><a href="#bind-å‡½æ•°" class="headerlink" title="bind()å‡½æ•°"></a>bind()å‡½æ•°</h4><p>int bind(int sockfd, const struct sockaddr *addr, socklen_t addrlen);<br>é€šå¸¸æœåŠ¡å™¨åœ¨å¯åŠ¨çš„æ—¶å€™éƒ½ä¼šç»‘å®šä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„åœ°å€ï¼ˆå¦‚ipåœ°å€+ç«¯å£å·ï¼‰ï¼Œç”¨äºæä¾›æœåŠ¡ï¼Œå®¢æˆ·å°±å¯ä»¥é€šè¿‡å®ƒæ¥æ¥è¿æœåŠ¡å™¨ï¼Œæ‰€ä»¥é€šå¸¸æœåŠ¡å™¨ç«¯åœ¨listenä¹‹å‰ä¼šè°ƒç”¨bind()</p>
<h4 id="listen-å‡½æ•°"><a href="#listen-å‡½æ•°" class="headerlink" title="listen()å‡½æ•°"></a>listen()å‡½æ•°</h4><p>int listen(int sockfd, int backlog);<br>ä½œä¸ºä¸€ä¸ªæœåŠ¡å™¨ï¼Œåœ¨è°ƒç”¨socket()ã€bind()ä¹‹åå°±ä¼šè°ƒç”¨listen()æ¥ç›‘å¬è¿™ä¸ªsocketï¼Œå¦‚æœå®¢æˆ·ç«¯è¿™æ—¶è°ƒç”¨connect()å‘å‡ºè¿æ¥è¯·æ±‚ï¼ŒæœåŠ¡å™¨ç«¯å°±ä¼šæ¥æ”¶åˆ°è¿™ä¸ªè¯·æ±‚ã€‚<br>ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯socketæè¿°å­—ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯socketå¯ä»¥æ’é˜Ÿçš„æœ€å¤§è¿æ¥ä¸ªæ•°</p>
<h4 id="accept-å‡½æ•°"><a href="#accept-å‡½æ•°" class="headerlink" title="accept()å‡½æ•°"></a>accept()å‡½æ•°</h4><p>int accept(int sockfd, struct sockaddr <em>addr, socklen_t </em>addrlen)<br>Serverç«¯é€šè¿‡socket(),bind(),listen()æ“ä½œï¼Œå°±å¯ä»¥ç›‘å¬æŒ‡å®šçš„socketåœ°å€äº†ã€‚Clientç«¯é€šè¿‡requests.get(url)å‡½æ•°å»ºç«‹è¿æ¥è¯·æ±‚ï¼ŒServerç«¯ç›‘å¬åˆ°åè°ƒç”¨accept()æ¥æ”¶è¿™ä¸ªè¯·æ±‚ï¼Œä¹‹åå°±å¯ä»¥è¿›è¡Œä¸¤ç«¯çš„I/Oæ“ä½œäº†ã€‚</p>
<h4 id="close-å‡½æ•°"><a href="#close-å‡½æ•°" class="headerlink" title="close()å‡½æ•°"></a>close()å‡½æ•°</h4><p>ä¼ è¾“å®Œæˆéœ€è¦å…³é—­è¿æ¥ã€‚ä»¥ä¸Šæ˜¯socketçš„Cä»£ç è§£è¯»ï¼Œpythonä¸­çš„éå¸¸ç±»ä¼¼ï¼Œå¦‚ä¸‹æ˜¯ç”¨pythonå†™çš„socketä¼ è¾“å­—ç¬¦ä¸²ï¼ŒåŸºæœ¬éƒ½å¯ä»¥çœ‹æ‡‚ã€‚<br><code>Server</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">HOST, PORT = <span class="string">''</span>, <span class="number">8888</span> <span class="comment"># Serverç«¯ç½‘ç»œIPåŠç«¯å£</span></span><br><span class="line">listen_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">listen_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, <span class="number">1</span>)</span><br><span class="line">listen_socket.bind((HOST, PORT))</span><br><span class="line">listen_socket.listen(<span class="number">1</span>)  <span class="comment">#è®¾ç½®ç›‘å¬ï¼Œæœ€å¤šæœ‰5ä¸ªç«¯æ’é˜Ÿç­‰ä¾¯</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">'Serving HTTP on port %s ...'</span> % PORT  <span class="comment"># å¼€å¯äº†ä¸€ä¸ªä¾¦å¬socket</span></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">  coon, addr = listen_socket.accept()  <span class="comment"># å¼€å¯ä¸€ä¸ªæ°¸ç»­å¾ªç¯ï¼Œè¢«åŠ¨ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥</span></span><br><span class="line">  request = coon.recv(<span class="number">1024</span>) <span class="comment"># æ¥æ”¶bytesç±»å‹æ•°æ®ï¼Œæ¯æ¬¡æ¥æ”¶1024b</span></span><br><span class="line">  accept_data = str(request, encoding=<span class="string">"utf8"</span>) </span><br><span class="line">  <span class="comment">#print(request)</span></span><br><span class="line">  print(<span class="string">""</span>.join((<span class="string">"æ¥æ”¶å†…å®¹ï¼š"</span>, accept_data, <span class="string">"    å®¢æˆ·ç«¯å£ï¼š"</span>, str(addr[<span class="number">1</span>]))))</span><br><span class="line"> </span><br><span class="line">  http_response = <span class="string">"Hello World!"</span></span><br><span class="line"> </span><br><span class="line">  conn.sendall(bytes(http_response, encoding=<span class="string">"utf8"</span>))  <span class="comment"># é‡æ–°å»ºç«‹è¿æ¥åï¼Œè¿”å›ä¸€ä¸ªæœåŠ¡å™¨ä¸­é¢„å®šä¹‰çš„å­—ç¬¦ä¸²</span></span><br><span class="line">  coon.close()</span><br></pre></td></tr></table></figure></p>
<p><code>Client</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line">sk = socket.socket()</span><br><span class="line">sk.connect((<span class="string">"192.168.1.136"</span>, <span class="number">8888</span>))  <span class="comment"># ä¸å±€åŸŸç½‘å†…Serverç«¯IPåœ°å€Connect</span></span><br><span class="line">send_data = <span class="string">"Hello Server"</span></span><br><span class="line">sk.sendall(bytes(send_data, encoding=<span class="string">"utf8"</span>))</span><br><span class="line">accept_data = sk.recv(<span class="number">1024</span>)</span><br><span class="line">print(str(accept_data, encoding=<span class="string">"utf8"</span>)) <span class="comment"># æ¥æ”¶åˆ°Serverç«¯å‘æ¥çš„â€œHello World!â€</span></span><br><span class="line">sk.close()</span><br></pre></td></tr></table></figure></p>
<p>Tipsï¼š</p>
<blockquote>
<ul>
<li>éœ€è¦æ³¨æ„<code>send</code>ã€<code>recv</code>å‡½æ•°å¿…é¡»æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œæœ‰æ¥å¿…æœ‰æ”¶ï¼Œé€»è¾‘ä¸Šå¿…é¡»è¶³å¤Ÿæ¸…æ¥šã€‚å¦åˆ™ä¼šé€ æˆä¸çŸ¥åçš„ä¸€äº›Errorã€‚</li>
<li>åœ¨python3ä¸­ï¼Œæ‰€æœ‰æ•°æ®çš„ä¼ è¾“å¿…é¡»ç”¨bytesç±»å‹ï¼ˆbytesåªæ”¯æŒasciiç ï¼‰æ‰€ä»¥åœ¨å‘é€æ•°æ®çš„æ—¶å€™è¦ä¹ˆåœ¨å‘é€çš„å­—ç¬¦ä¸²å‰é¢åŠ  â€˜bâ€™ï¼Œè¦ä¹ˆä½¿ç”¨encode(â€˜utf-8â€™)è¿›è¡Œè½¬æ¢æˆbytesç±»å‹å‘é€</li>
</ul>
</blockquote>
<h3 id="é€šè¿‡Socketåœ¨å±€åŸŸç½‘å†…ä¼ è¾“å›¾ç‰‡-è§†é¢‘-PDFç­‰"><a href="#é€šè¿‡Socketåœ¨å±€åŸŸç½‘å†…ä¼ è¾“å›¾ç‰‡-è§†é¢‘-PDFç­‰" class="headerlink" title="é€šè¿‡Socketåœ¨å±€åŸŸç½‘å†…ä¼ è¾“å›¾ç‰‡/è§†é¢‘/PDFç­‰"></a>é€šè¿‡Socketåœ¨å±€åŸŸç½‘å†…ä¼ è¾“å›¾ç‰‡/è§†é¢‘/PDFç­‰</h3><p>é€šè¿‡ä¸Šé¢çš„å·¥ä½œï¼Œå·²ç»èƒ½å¤Ÿå®ç°æ™®é€šå­—ç¬¦ä¸²çš„ä¼ è¾“äº†ï¼Œé‚£ä¹ˆæ€æ ·æ­å»ºä¸€ä¸ªé€šç”¨çš„æ–‡ä»¶ä¼ è¾“ç³»ç»Ÿå‘¢ï¼Ÿè¿™é‡Œåªéœ€è¦åŠ ä¸€ä¸ªTrickï¼Œä¾ç„¶æ˜¯æ¯æ¬¡<code>recv(1024)</code>ï¼Œä½†è¦å¾ªç¯æ¥æ”¶ï¼Œç›´åˆ°æ–‡ä»¶å…¨éƒ¨è¢«ä¼ è¾“å®Œæ¯•ä¸ºæ­¢ã€‚å…³é”®ä»£ç å¦‚ä¸‹ï¼š<br><code>Server</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os,socket,hashlib</span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"><span class="comment"># socketç›‘å¬å®šä¹‰</span></span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    conn, addr = listen_socket.accept()</span><br><span class="line">    request = conn.recv(<span class="number">1024</span>)</span><br><span class="line">    data = str(request, encoding=<span class="string">"utf8"</span>)</span><br><span class="line">    print(<span class="string">"æ¥æ”¶å†…å®¹ï¼š"</span>, data)</span><br><span class="line">    filename = <span class="string">"/home/tucodec/ZJU.mp4"</span></span><br><span class="line">    <span class="keyword">if</span> os.path.isfile(filename):</span><br><span class="line">        f = open(filename,<span class="string">"rb"</span>)</span><br><span class="line">        m = hashlib.md5() <span class="comment"># å“ˆå¸Œç ç”¨æ¥åŠ å¯†æ–‡ä»¶</span></span><br><span class="line">        file_size = os.stat(filename).st_size</span><br><span class="line">        conn.send(str(file_size).encode(<span class="string">"utf-8"</span>)) <span class="comment"># send size to clientï¼Œè®¡ç®—éœ€è¦å¾ªç¯å¤šå°‘ä¸ª1024 byte</span></span><br><span class="line">        conn.recv(<span class="number">1024</span>) <span class="comment"># è”ç³»ä¸¤ä¸ªsendä¼šå‘ç”Ÿç²˜åŒ…ï¼ŒåŠ ä¸€ä¸ªrecv</span></span><br><span class="line">        <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">            m.update(line)</span><br><span class="line">            conn.send(line) <span class="comment"># å¾ªç¯å‘é€</span></span><br><span class="line">        f.close()</span><br><span class="line">    print(<span class="string">"send done..."</span>)</span><br></pre></td></tr></table></figure></p>
<p><code>Client</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket,hashlib</span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">	sk = socket.socket()</span><br><span class="line">	sk.connect((<span class="string">"192.168.1.136"</span>, <span class="number">8888</span>))  <span class="comment"># ä¸»åŠ¨åˆå§‹åŒ–ä¸æœåŠ¡å™¨ç«¯çš„è¿æ¥</span></span><br><span class="line">	<span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">		strs = input(<span class="string">"è¯·è¾“å…¥ï¼š"</span>)</span><br><span class="line">		<span class="keyword">if</span> len(strs) == <span class="number">0</span>:</span><br><span class="line">			<span class="keyword">continue</span></span><br><span class="line">		sk.send(bytes(strs, encoding=<span class="string">"utf8"</span>))</span><br><span class="line">		server_resp_size = sk.recv(<span class="number">1024</span>)  <span class="comment"># æ¥æ”¶send_filesizeï¼Œbytesç±»å‹çš„æ•°æ®</span></span><br><span class="line">		file_total_size = int(server_resp_size.decode()) <span class="comment"># æ ¼å¼è½¬æ¢</span></span><br><span class="line">		sk.send(bytes(<span class="string">"å¼€å§‹æ¥æ”¶æ–‡ä»¶..."</span>, encoding=<span class="string">"utf8"</span>))</span><br><span class="line">		f = open(<span class="string">'new.mp4'</span>, <span class="string">"wb"</span>)</span><br><span class="line">		m = hashlib.md5()</span><br><span class="line">		recv_size = <span class="number">0</span></span><br><span class="line">		<span class="keyword">while</span> recv_size &lt; file_total_size:</span><br><span class="line">		    <span class="keyword">if</span> file_total_size - recv_size &gt; <span class="number">1024</span>:   <span class="comment">#æœ€åä¸€æ¬¡æ¥æ”¶ä¹‹å‰,æ¥æ”¶å¤§å°è®¾ç½®ä¸º1024</span></span><br><span class="line">		        size = <span class="number">1024</span></span><br><span class="line">		    <span class="keyword">else</span>:                                    <span class="comment">#æœ€åä¸€æ¬¡ä¸è¶³1024ï¼Œåˆ™åªæ¥æ”¶æ–‡ä»¶å‰©ä½™çš„éƒ¨åˆ†</span></span><br><span class="line">		        size = file_total_size - recv_size</span><br><span class="line">		    data = sk.recv(size)</span><br><span class="line">		    recv_size += len(data)</span><br><span class="line">		    f.write(data)</span><br><span class="line">		    m.update(data)</span><br><span class="line">		f.close()</span><br><span class="line">		sk.close()</span><br><span class="line">		<span class="keyword">break</span></span><br></pre></td></tr></table></figure></p>
<h3 id="aaugustin-websockets"><a href="#aaugustin-websockets" class="headerlink" title="aaugustin/websockets"></a>aaugustin/websockets</h3><p>å°è¯•äº†socketçš„ç»†èŠ‚åï¼Œå¯¹ç½‘ç»œç¼–ç¨‹æœ‰äº†äº›åŸºç¡€çš„è®¤è¯†ã€‚ä½†æ˜¯è¦å’Œ<code>json</code>å°å“¥é€šä¿¡è¿˜æ˜¯ä¸è¡Œçš„ï¼Œç”¨ä¸Šè¿°çš„<code>socket.recv(1024)</code>æ–¹æ³•å¾—åˆ°çš„ï¼Œæ˜¯å°å“¥å‘è¿‡æ¥çš„æ˜¯HttpæŠ¥å¤´ï¼Œéœ€è¦å„ç§æ ¡éªŒï¼Œæ‰èƒ½å®Œæˆæ¡æ‰‹ã€‚æœæ–­ä¸ŠGithubå¯»æ‰¾åˆ«äººå†™å¥½çš„åŒ…ï¼Œè¿™æ—¶<a href="https://websockets.readthedocs.io/en/stable/intro.html" target="_blank" rel="noopener">aaugustin/websockets</a>ä»¥å…¶ç®€æ´ç®¡äº‹å„¿è¿›å…¥äº†æˆ‘çš„è§†çº¿ï¼Œç›´æ¥æŠŠæ–‡æ¡£ä¸­çš„ä¾‹å­æ‹¿æ¥è·‘ä¾¿å¯ä»¥ä¸€ç›®äº†ç„¶ã€‚<br><code>Server</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">import</span> websockets</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">(websocket, path)</span>:</span></span><br><span class="line">    name = <span class="keyword">await</span> websocket.recv()</span><br><span class="line">    print(<span class="string">"&lt; &#123;&#125;"</span>.format(name))</span><br><span class="line"></span><br><span class="line">    greeting = <span class="string">"Hello &#123;&#125;!"</span>.format(name)</span><br><span class="line">    <span class="keyword">await</span> websocket.send(greeting)</span><br><span class="line">    print(<span class="string">"&gt; &#123;&#125;"</span>.format(greeting))</span><br><span class="line"></span><br><span class="line">start_server = websockets.serve(hello, <span class="string">''</span>, <span class="number">8888</span>)</span><br><span class="line"></span><br><span class="line">asyncio.get_event_loop().run_until_complete(start_server)</span><br><span class="line">asyncio.get_event_loop().run_forever()</span><br></pre></td></tr></table></figure></p>
<p><code>Client</code><br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">import</span> websockets</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">with</span> websockets.connect(<span class="string">'ws://192.168.1.136:8888'</span>) <span class="keyword">as</span> websocket:</span><br><span class="line">        name = input(<span class="string">"What's your name? "</span>)</span><br><span class="line">        <span class="keyword">await</span> websocket.send(name)</span><br><span class="line">        print(<span class="string">"&gt; &#123;&#125;"</span>.format(name))</span><br><span class="line"></span><br><span class="line">        greeting = <span class="keyword">await</span> websocket.recv()</span><br><span class="line">        print(<span class="string">"&lt; &#123;&#125;"</span>.format(greeting))</span><br><span class="line"></span><br><span class="line">asyncio.get_event_loop().run_until_complete(hello())</span><br></pre></td></tr></table></figure></p>
<h3 id="Referï¼š"><a href="#Referï¼š" class="headerlink" title="Referï¼š"></a>Referï¼š</h3><p><a href="https://websockets.readthedocs.io/en/stable/intro.html" target="_blank" rel="noopener">aaugustin/websockets</a><br><a href="https://liam0205.me/2016/02/27/The-requests-library-in-Python/" target="_blank" rel="noopener">Python HTTP åº“ï¼šrequests å¿«é€Ÿå…¥é—¨</a><br><a href="http://www.jb51.net/article/79663.html" target="_blank" rel="noopener">ä½¿ç”¨Pythonæ¥ç¼–å†™HTTPæœåŠ¡å™¨çš„è¶…çº§æŒ‡å—</a><br><a href="http://blog.csdn.net/gneveek/article/details/8699198" target="_blank" rel="noopener">ç½‘ç»œç¼–ç¨‹å­¦ä¹ ç¬”è®°ä¸€ï¼šSocketç¼–ç¨‹</a><br><a href="https://www.cnblogs.com/idontknowthisperson/p/5958536.html" target="_blank" rel="noopener">Python3 Socketç½‘ç»œç¼–ç¨‹</a><br><a href="https://www.cnblogs.com/rainowl-ymj/p/7221668.html" target="_blank" rel="noopener">Python 3.xâ€“Socketå®ç°ç®€å•çš„sshå’Œæ–‡ä»¶ä¸‹è½½åŠŸèƒ½</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/30/doc2vec/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ç¥¥å‰">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://ws1.sinaimg.cn/large/006tNc79ly1fnu0obfmlbj30sg0iyabk.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Deep Coding">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/01/30/doc2vec/" itemprop="url">æ–‡æœ¬è¯­ä¹‰åŒ¹é…/ç›¸ä¼¼åº¦åº¦é‡</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2018-01-30T10:03:31+08:00">
                2018-01-30
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/01/30/doc2vec/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/01/30/doc2vec/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Word2vecè¯­ä¹‰ç›¸ä¼¼åº¦è®¡ç®—"><a href="#Word2vecè¯­ä¹‰ç›¸ä¼¼åº¦è®¡ç®—" class="headerlink" title="Word2vecè¯­ä¹‰ç›¸ä¼¼åº¦è®¡ç®—"></a>Word2vecè¯­ä¹‰ç›¸ä¼¼åº¦è®¡ç®—</h3><p>ä¸Šä¸€ç« èŠ‚ï¼Œæˆ‘ä»¬ç”¨1.1Gçš„ä¸­æ–‡ç»´åŸºç™¾ç§‘è¯­æ–™è®­ç»ƒäº†è¯å‘é‡ã€‚è€ŒçŸ­æ–‡æœ¬çš„è¯­ä¹‰ç›¸ä¼¼åº¦åº¦é‡ï¼Œæœ€ç®€å•çš„æ–¹æ³•ä¾¿æ˜¯æŠŠæ¯ä¸ªå¥å­çš„è¯å‘é‡ç›¸åŠ ï¼Œç„¶åè®¡ç®—å…¶ä½™å¼¦ç›¸ä¼¼åº¦ã€‚gensimåŒ…ä¸­åŒæ ·ç”¨å‡½æ•°å®ç°äº†è¿™ä¸€ç®—æ³•ï¼Œå¦‚ä¸‹ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">n_similarity</span><span class="params">(self, ws1, ws2)</span>:</span></span><br><span class="line">    v1 = [self[word] <span class="keyword">for</span> word <span class="keyword">in</span> ws1]</span><br><span class="line">    v2 = [self[word] <span class="keyword">for</span> word <span class="keyword">in</span> ws2]</span><br><span class="line">    <span class="keyword">return</span> dot(matutils.unitvec(array(v1).mean(axis=<span class="number">0</span>)), matutils.unitvec(array(v2).mean(axis=<span class="number">0</span>)))</span><br></pre></td></tr></table></figure></p>
<p>å»ºç«‹ä¸€ä¸ª<code>target.txt</code>æ–‡ä»¶å­˜æ”¾å¾…åŒ¹é…çš„é—®é¢˜ï¼Œä»£ç æ¯”è¾ƒç®€å•å¦‚ä¸‹ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="comment">#!/usr/bin/env Python</span></span><br><span class="line"><span class="keyword">from</span> gensim.models <span class="keyword">import</span> Word2Vec</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line">jieba.load_userdict(<span class="string">"dict.txt"</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ResultInfo</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, index, score, text)</span>:</span></span><br><span class="line">        self.id = index</span><br><span class="line">        self.score = score</span><br><span class="line">        self.text = text</span><br><span class="line"></span><br><span class="line">target = <span class="string">"target.txt"</span> <span class="comment"># é—®é¢˜é›†åˆ</span></span><br><span class="line">model = <span class="string">"./model/word2vec"</span></span><br><span class="line"></span><br><span class="line">model_w2v = Word2Vec.load(model) <span class="comment">#åŠ è½½æ¨¡å‹ æ–‡å­—æ‘˜è¦</span></span><br><span class="line"><span class="keyword">print</span> (<span class="string">"æ¨¡å‹åŠ è½½æˆåŠŸï¼"</span>)</span><br><span class="line">candidates = []</span><br><span class="line"><span class="keyword">with</span> open(target) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">        candidates.append(line.strip().split()) <span class="comment"># candidatesåˆ—è¡¨ä¸­åŠ è½½æ‰€æœ‰é—®é¢˜ï¼Œ</span></span><br><span class="line">å¹¶ç”¨ç©ºæ ¼åˆ†å‰²</span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line">    text = input(<span class="string">"è¯·è¾“å…¥æŸ¥è¯¢æŒ‡ä»¤ï¼š "</span>)</span><br><span class="line">    words = list(jieba.cut(text.strip()))</span><br><span class="line">    <span class="keyword">if</span> len(words) == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    flag = <span class="keyword">False</span></span><br><span class="line">    <span class="keyword">for</span> w <span class="keyword">in</span> words:</span><br><span class="line">        <span class="keyword">if</span> w <span class="keyword">not</span> <span class="keyword">in</span> model_w2v.wv.vocab:</span><br><span class="line">            <span class="keyword">print</span> (<span class="string">"è¾“å…¥æŒ‡ä»¤ä¸­è¯æ±‡â€œ%sâ€ä¸åœ¨å­—å…¸ä¸­"</span> % w)</span><br><span class="line">            flag = <span class="keyword">True</span></span><br><span class="line">    <span class="keyword">if</span> flag:</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">    res = []</span><br><span class="line">    index = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> candidate <span class="keyword">in</span> candidates:</span><br><span class="line">        score = model_w2v.n_similarity(words, candidate)</span><br><span class="line">        res.append(ResultInfo(index, score, <span class="string">" "</span>.join(candidate)))</span><br><span class="line">        index += <span class="number">1</span></span><br><span class="line">    res.sort(key=<span class="keyword">lambda</span> x:x.score, reverse=<span class="keyword">True</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> res:</span><br><span class="line">        <span class="keyword">print</span> i.text <span class="comment"># è¾“å‡ºç›¸ä¼¼åº¦æœ€é«˜çš„è¯­å¥</span></span><br></pre></td></tr></table></figure></p>
<p>æœ€åæµ‹è¯•ç»“æœå¦‚ä¸‹ï¼Œåœ¨çŸ­æ–‡æœ¬çš„ç›¸ä¼¼åº¦æµ‹é‡ä¸Šï¼ŒåŸºäºè¯å‘é‡ç›¸ä¼¼åº¦åº¦é‡çš„ç®—æ³•åœ¨è®¡ç®—é€Ÿåº¦å’Œè´¨é‡ä¸Šå‡æ˜¯æ¯”è¾ƒæ»¡æ„çš„ã€‚</p>
<blockquote>
<p>  ============<strong>ä½“è‚²</strong>=============<br>    3 ä¸–ç•Œ é”¦æ ‡èµ› ä¸­å›½é˜Ÿ èƒœå‡º 0.42<br>    4 ä¸­å›½ è¶³çƒ å¤±è´¥ 0.41<br>    2 å¥¥è¿ä¼š ä¸­å›½ å¥³æ’ å¤ºå†  0.40<br>    ============<strong>å†œä¸š</strong>=============<br>    1 å†œæ°‘ åœ¨ æ±Ÿè‹ ç§ æ°´ç¨» 0.55<br>    0 äººå·¥æ™ºèƒ½ å’Œ å†œä¸š æ€ä¹ˆ ç»“åˆ 0.45<br>    5 å±±ä¸œ è‹¹æœ ä¸°æ”¶ 0.42  </p>
</blockquote>
<h3 id="Doc2vecè¯­ä¹‰ç›¸ä¼¼åº¦è®¡ç®—"><a href="#Doc2vecè¯­ä¹‰ç›¸ä¼¼åº¦è®¡ç®—" class="headerlink" title="Doc2vecè¯­ä¹‰ç›¸ä¼¼åº¦è®¡ç®—"></a>Doc2vecè¯­ä¹‰ç›¸ä¼¼åº¦è®¡ç®—</h3><p>Doc2vecçš„åŸç†æš‚æœªæ·±å…¥ç ”ç©¶ï¼Œå‚ç…§ç½‘ä¸Šå„è·¯æ•™ç¨‹è·‘é€šåçš„ä»£ç å¦‚ä¸‹ã€‚ç¬”è€…ç”¨è¯¥doc2vecè¿›è¡Œäº†è¯­ä¹‰ç›¸ä¼¼åº¦æ£€æµ‹ï¼Œä½†æ•ˆæœå·®å¼ºäººæ„ï¼ˆå…·ä½“æ¥è¯´ï¼Œèƒ½æ•æ‰åˆ°ä¸€å®šç¨‹åº¦å¥å­ç»“æ„ä¿¡æ¯ï¼Œä½†å¯¹è¯­ä¹‰å¾ˆæ¨¡ç³Šï¼‰ã€‚å¯èƒ½è·Ÿè¯­æ–™åº“é€‰å–å…³ç³»è¾ƒå¤§ï¼Œæ­¤å¤„ç”¨çš„ä¸æ˜¯ä¸€è¡Œè¡Œçš„çŸ­å¥ï¼Œè€Œæ˜¯è®­ç»ƒword2vecçš„è¯­æ–™ï¼Œä¸€è¡Œä¸€æ®µè¯â€¦æ¥ä¸‹æ¥è‹¥æœ‰æ–‡æœ¬åˆ†ç±»ç­‰ä»»åŠ¡ï¼Œå†è¡¥ä¸Šè¯¦ç»†ç ”ç©¶è·¯çº¿<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> gensim</span><br><span class="line"><span class="keyword">import</span> smart_open</span><br><span class="line"><span class="keyword">import</span> multiprocessing</span><br><span class="line"><span class="keyword">import</span> logging</span><br><span class="line"><span class="keyword">from</span> gensim.models.doc2vec <span class="keyword">import</span> TaggedDocument, Doc2Vec</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding(<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line">data_set = <span class="string">"pre0"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">read_corpus</span><span class="params">(fname, tokens_only=False)</span>:</span></span><br><span class="line">    <span class="keyword">with</span> smart_open.smart_open(fname, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">for</span> i, line <span class="keyword">in</span> enumerate(f):</span><br><span class="line">            <span class="keyword">if</span> tokens_only:</span><br><span class="line">                <span class="keyword">yield</span> gensim.utils.simple_preprocess(line)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                text = line.split()</span><br><span class="line">                <span class="keyword">yield</span> TaggedDocument(text[:], [i])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">train_data = list(read_corpus(data_set))</span><br><span class="line"><span class="keyword">print</span> len(train_data)</span><br><span class="line"></span><br><span class="line">logging.basicConfig(format=<span class="string">'%(asctime)s : %(levelname)s : %(message)s'</span>, level=logging.INFO)</span><br><span class="line">model = Doc2Vec(size=<span class="number">100</span>, min_count=<span class="number">1</span>, iter=<span class="number">10</span>, workers=multiprocessing.cpu_count())</span><br><span class="line">model.build_vocab(train_data)</span><br><span class="line">model.train(train_data, total_examples=model.corpus_count, epochs=<span class="number">100</span>)</span><br><span class="line">model.save(<span class="string">'./model/model_new.doc2vec'</span>)</span><br></pre></td></tr></table></figure></p>
<h3 id="Refï¼š"><a href="#Refï¼š" class="headerlink" title="Refï¼š"></a>Refï¼š</h3><p><a href="http://someth.duapp.com/2017/08/10/LSTM-%E5%8F%A5%E5%AD%90%E7%9B%B8%E4%BC%BC%E5%BA%A6%E5%88%86%E6%9E%90/" target="_blank" rel="noopener">LSTM å¥å­ç›¸ä¼¼åº¦åˆ†æ</a><br><a href="http://blog.csdn.net/lenbow/article/details/52120230" target="_blank" rel="noopener">åŸºäºgensimçš„Doc2Vecç®€æ</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="https://ws1.sinaimg.cn/large/006tNc79ly1fnu0obfmlbj30sg0iyabk.jpg"
                alt="ç¥¥å‰" />
            
              <p class="site-author-name" itemprop="name">ç¥¥å‰</p>
              <p class="site-description motion-element" itemprop="description">è‡ªç„¶è¯­è¨€å¤„ç†ï¼ŒStudyingï¼ŒCoding</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">æ ‡ç­¾</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="mailto:wuxj231@163.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.zhihu.com/people/xj-wu-74/activities" target="_blank" title="çŸ¥ä¹">
                      
                        <i class="fa fa-fw fa-rocket"></i>çŸ¥ä¹</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://weibo.com/u/5379129372/home?wvr=5&lf=reg" target="_blank" title="å¾®åš">
                      
                        <i class="fa fa-fw fa-weibo"></i>å¾®åš</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ç¥¥å‰</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>


              
 
<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">åšå®¢å…¨ç«™å…±13.6kå­—</span>
</div>

<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  æœ¬ç«™è®¿å®¢æ•°:<span id="busuanzi_value_site_uv"></span>
</span>
</div>
        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"your-duoshuo-shortname"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  


















  





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

  
</body>
</html>
